debug: False
---------------------------------------- config ----------------------------------------
{'debug': False, 'test_relations': ['IsA'], 'save_all_data': True, 'top_k': 10, 'data_dir': 'data/hypernymsuite/ALL/swow_rw/', 'mask_string_mapping': {'bert-large-uncased': '[MASK]'}, 'use_dap_global': True, 'return_probs': True, 'anchor_scorer_list': ['probAvg'], 'scorer_target_1_prompt': 'probSum', 'scorer_target_N_prompts': 'freqProbLogSum', 'use_original_prompt': True, 'original_prompt_source': 'masked_sentence', 'incorporate_operations': ['concate_or_single'], 'filter_anchors_flag': True, 'filter_objects_flag': True, 'cpt_only': False, 'anchor_types': ['Coordinate_remove_Y_PUNC_FULL'], 'add_cpt_score': False, 'constrain_targets': False, 'add_wordnet_path_score': False, 'anchor_probe': 'plural_probe', 'anchor_col_prefix': 'subj_anchors', 'anchor_col': 'subj_anchors_swow', 'anchor_col_sg': 'subj_anchors_swow_sg', 'anchor_col_pl': 'subj_anchors_swow_pl', 'anchor_col_all': 'anchor_col_all', 'filter_objects_with_input': True, 'sub_col': 'sub_label', 'sub_col_sg': 'sub_label_sg', 'sub_col_pl': 'sub_label_pl', 'top_k_anchors': 1, 'max_anchor_num_list': [10], 'max_anchor_num': 10, 'sub_col_sgpl': 'sub_label_sgpl', 'filter_objects_with_anchors': False, 'oracle_anchor_inserted': False, 'use_oracle_anchor': False, 'anchor_source': 'LM', 'add_swow_score': False, 'swow_score_source': 'None', 'add_swow_filter': False}
---------------------------------------- config ----------------------------------------
reading cohyponyms: pre_post_process/log/word_to_cohyponyms.txt
Some weights of the model checkpoint at bert-large-uncased were not used when initializing BertForMaskedLM: ['cls.seq_relationship.weight', 'cls.seq_relationship.bias']
- This IS expected if you are initializing BertForMaskedLM from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing BertForMaskedLM from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
Some weights of the model checkpoint at bert-large-uncased were not used when initializing BertForMaskedLM: ['cls.seq_relationship.weight', 'cls.seq_relationship.bias']
- This IS expected if you are initializing BertForMaskedLM from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing BertForMaskedLM from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
---------------------------------------- bert-large-uncased-anchor_type: Coordinate_remove_Y_PUNC_FULL-scorer_anchor:probAvg-op:concate_or_single ----------------------------------------
{
    "IsA": {
        "relation": "IsA",
        "def_sap": [
            "[X] is a [MASK].",
            "[X] is a type of [MASK].",
            "[X] is a kind of [MASK]."
        ],
        "def_dap": [
            "[X] or [Z] is a [MASK].",
            "[X] or [Z] is a type of [MASK].",
            "[X] or [Z] is a kind of [MASK]."
        ],
        "lsp_sap": [
            "[MASK] such as [X].",
            "[MASK], including [X].",
            "[MASK], especially [X].",
            "[X] or other [MASK].",
            "[X] and other [MASK].",
            "such [MASK] as [X]."
        ],
        "lsp_dap": [
            "[MASK] such as [X] and [Z].",
            "[MASK], including [X] and [Z].",
            "[MASK], especially [X] and [Z].",
            "[X], [Z] and other [MASK].",
            "[X], [Z] or other [MASK].",
            "such [MASK] as [X] and [Z]."
        ],
        "use_dap": true,
        "anchor_target": "[X]",
        "anchor_lsp_sap": [
            "such as [X] and [MASK].",
            "such as [X] or [MASK].",
            "such as [X], [MASK],",
            "including [X] and [MASK].",
            "including [X] or [MASK].",
            "including [X], [MASK],",
            "especially [X] and [MASK].",
            "especially [X] or [MASK].",
            "especially [X], [MASK],",
            "[X], [MASK] or other",
            "[X], [MASK] and other"
        ]
    }
}
Processing IsA ... data/hypernymsuite/ALL/swow_rw//IsA.jsonl
#All Instances: 2094
#Valid Instances: 2094 in HYPERNYMSUITE (hyper in BERT)
	 step1: get anchors (fill and filter)
/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(
--- def_sap
--- lsp_sap
/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(
relation: IsA 	 use_dap: True
	 step2: insert anchors
sub_col sub_label
                                                def_dap subj_anchors_sg
0     [a catfish or [Z] is a [MASK]., a catfish or [...          [bass]
1     [a lemon or [Z] is a [MASK]., a lemon or [Z] i...          [lime]
2     [a turtle or [Z] is a [MASK]., a turtle or [Z]...         [snake]
3     [a bag or [Z] is a [MASK]., a bag or [Z] is a ...           [box]
4     [a rabbit or [Z] is a [MASK]., a rabbit or [Z]...           [fox]
...                                                 ...             ...
2089  [a world or [Z] is a [MASK]., a world or [Z] i...         [human]
2090  [a world or [Z] is a [MASK]., a world or [Z] i...         [human]
2091  [a world or [Z] is a [MASK]., a world or [Z] i...         [human]
2092  [a writer or [Z] is a [MASK]., a writer or [Z]...        [artist]
2093  [a yard or [Z] is a [MASK]., a yard or [Z] is ...         [house]

[2094 rows x 2 columns]
                                                lsp_dap subj_anchors_pl
0     [[MASK] such as catfish and [Z]., [MASK], incl...        [basses]
1     [[MASK] such as lemon and [Z]., [MASK], includ...         [limes]
2     [[MASK] such as turtles and [Z]., [MASK], incl...        [snakes]
3     [[MASK] such as bags and [Z]., [MASK], includi...         [boxes]
4     [[MASK] such as rabbits and [Z]., [MASK], incl...         [foxes]
...                                                 ...             ...
2089  [[MASK] such as worlds and [Z]., [MASK], inclu...         [human]
2090  [[MASK] such as worlds and [Z]., [MASK], inclu...         [human]
2091  [[MASK] such as worlds and [Z]., [MASK], inclu...         [human]
2092  [[MASK] such as writers and [Z]., [MASK], incl...       [artists]
2093  [[MASK] such as yard and [Z]., [MASK], includi...        [houses]

[2094 rows x 2 columns]
	 step3: fill mask in dap anchors
  0%|          | 0/2094 [00:00<?, ?it/s]/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(
 62%|██████▏   | 1291/2094 [01:00<00:37, 21.50it/s] 62%|██████▏   | 1291/2094 [01:20<00:37, 21.50it/s]100%|██████████| 2094/2094 [01:37<00:00, 21.49it/s]
  0%|          | 0/2094 [00:00<?, ?it/s] 31%|███       | 650/2094 [01:00<02:13, 10.82it/s] 31%|███       | 650/2094 [01:12<02:13, 10.82it/s] 62%|██████▏   | 1299/2094 [02:00<01:13, 10.81it/s] 62%|██████▏   | 1299/2094 [02:12<01:13, 10.81it/s] 93%|█████████▎| 1949/2094 [03:00<00:13, 10.82it/s] 93%|█████████▎| 1949/2094 [03:12<00:13, 10.82it/s]100%|██████████| 2094/2094 [03:13<00:00, 10.82it/s]
  sub_label   obj_label relation  obj_in_BERT         masked_sentences  uuid  sub_position sub_label_sg sub_label_pl                                            def_sap                                            def_dap                                            lsp_sap                                            lsp_dap                                     anchor_lsp_sap           sub_label_sgpl                                  obj_mask_sentence                            obj_mask_sentence_score                                   obj_mask_def_sap                             obj_mask_def_sap_score                                   obj_mask_lsp_sap                             obj_mask_lsp_sap_score                                       subj_anchors                                 subj_anchors_score subj_anchors_sg subj_anchors_pl                                   subj_anchors_all    subj_anchors_combined                           def_dap_with_subj_anchor  \
0   catfish      [fish]      IsA            1  [A catfish is a [MASK]]     1             2      catfish      catfish  [a catfish is a [MASK]., a catfish is a type o...  [a catfish or [Z] is a [MASK]., a catfish or [...  [[MASK] such as catfish., [MASK], including ca...  [[MASK] such as catfish and [Z]., [MASK], incl...  [such as catfish and [MASK]., such as catfish ...  catfish catfish catfish  [fish, boat, river, genus, gastropod, lizard, ...  {'fish': -17.492517940945792, 'boat': -19.0523...  [fish, shrimp, mollusk, swimmer, salmon, bird,...  {'fish': -4.442973047064299, 'shrimp': -12.345...  [fish, species, animal, seafood, reptile, inve...  {'fish': -4.942579534624883, 'species': -9.299...  [bass, carp, shrimp, perch, alligator, trout, ...  {'bass': 0.39879070899703284, 'carp': 0.181602...          [bass]        [basses]  [bass, carp, shrimp, perch, alligator, trout, ...  catfish catfish catfish  [a catfish or a bass is a [MASK]., a catfish o...   
1     lemon   [produce]      IsA            1    [A lemon is a [MASK]]     2             2        lemon        lemon  [a lemon is a [MASK]., a lemon is a type of [M...  [a lemon or [Z] is a [MASK]., a lemon or [Z] i...  [[MASK] such as lemon., [MASK], including lemo...  [[MASK] such as lemon and [Z]., [MASK], includ...  [such as lemon and [MASK]., such as lemon or [...        lemon lemon lemon  [fruit, tree, person, bottle, key, seed, twist...  {'fruit': -15.145185477808239, 'tree': -15.459...  [fruit, drink, lime, candy, apple, orange, ber...  {'fruit': -7.934486012665629, 'drink': -10.454...  [fruit, citrus, apple, thing, orange, lime, wa...  {'fruit': -7.175187479938773, 'fruits': -7.897...  [lime, orange, apple, yes, cherry, water, pepp...  {'lime': 0.5027932287617163, 'orange': 0.15136...          [lime]         [limes]  [lime, orange, apple, yes, cherry, water, pepp...        lemon lemon lemon  [a lemon or a lime is a [MASK]., a lemon or a ...   
2   turtles     [beast]      IsA            1   [A turtle is a [MASK]]     3             2       turtle      turtles  [a turtle is a [MASK]., a turtle is a type of ...  [a turtle or [Z] is a [MASK]., a turtle or [Z]...  [[MASK] such as turtles., [MASK], including tu...  [[MASK] such as turtles and [Z]., [MASK], incl...  [such as turtles and [MASK]., such as turtles ...   turtles turtle turtles   [lizard, person, shell, boat, human, fish, tree]  {'lizard': -16.036533980021577, 'person': -16....  [bird, animal, fish, mammal, creature, lizard,...  {'bird': -6.983079495727402, 'animal': -7.2181...  [reptile, animal, bird, creature, wildlife, in...  {'reptiles': -6.12624919356388, 'animals': -6....  [snakes, birds, fish, lizards, frogs, dragons,...  {'snakes': 0.3146660774946213, 'birds': 0.1580...         [snake]        [snakes]  [snake, bird, fish, lizard, frog, dragon, shar...   turtles turtle turtles  [a turtle or a snake is a [MASK]., a turtle or...   
3      bags   [luggage]      IsA            1      [A bag is a [MASK]]     4             2          bag         bags  [a bag is a [MASK]., a bag is a type of [MASK]...  [a bag or [Z] is a [MASK]., a bag or [Z] is a ...  [[MASK] such as bags., [MASK], including bags....  [[MASK] such as bags and [Z]., [MASK], includi...  [such as bags and [MASK]., such as bags or [MA...            bags bag bags  [person, box, pouch, pack, container, suitcase...  {'person': -15.800401335816666, 'box': -16.478...  [container, luggage, backpack, suitcase, sack,...  {'container': -8.861242617076943, 'luggage': -...  [thing, item, object, luggage, belongings, acc...  {'things': -7.206912668513597, 'items': -8.137...  [boxes, yes, shoes, cases, obviously, yeah, cl...  {'boxes': 0.1638453546911478, 'yes': 0.0626923...           [box]         [boxes]  [box, yes, shoe, case, obviously, yeah, clothe...            bags bag bags  [a bag or a box is a [MASK]., a bag or a box i...   
4   rabbits  [creature]      IsA            1   [A rabbit is a [MASK]]     5             2       rabbit      rabbits  [a rabbit is a [MASK]., a rabbit is a type of ...  [a rabbit or [Z] is a [MASK]., a rabbit or [Z]...  [[MASK] such as rabbits., [MASK], including ra...  [[MASK] such as rabbits and [Z]., [MASK], incl...  [such as rabbits and [MASK]., such as rabbits ...   rabbits rabbit rabbits  [person, horse, human, dog, man, child, pig, k...  {'person': -15.755672171378398, 'horse': -15.9...  [animal, mammal, dog, bird, cat, fox, pig, har...  {'animal': -6.5751558948461675, 'mammal': -8.9...  [animal, rodent, mammal, wildlife, livestock, ...  {'animals': -5.903334231711103, 'rodents': -7....  [foxes, deer, squirrels, mice, rodents, rats, ...  {'foxes': 0.21225315535610373, 'deer': 0.16438...           [fox]         [foxes]  [fox, deer, squirrels, mouse, rodent, rat, dog...   rabbits rabbit rabbits  [a rabbit or a fox is a [MASK]., a rabbit or a...   

                            lsp_dap_with_subj_anchor                                   obj_mask_def_dap                             obj_mask_def_dap_score                                   obj_mask_lsp_dap                             obj_mask_lsp_dap_score  
0  [[MASK] such as catfish and basses., [MASK], i...  [fish, species, salmon, predator, bass, seafoo...  {'fish': -4.323410478695007, 'species': -12.50...  [fish, species, seafood, fishing, fishery, ani...  {'fish': -4.768969405566868, 'species': -8.950...  
1  [[MASK] such as lemon and limes., [MASK], incl...  [lime, fruit, drink, soda, wine, juice, candy,...  {'lime': -6.902179866134984, 'fruit': -7.08791...  [fruit, citrus, thing, lime, ingredient, drink...  {'fruits': -7.096098222037281, 'fruit': -7.179...  
2  [[MASK] such as turtles and snakes., [MASK], i...  [bird, animal, snake, fish, mammal, lizard, cr...  {'bird': -7.140210269612996, 'animal': -7.4942...  [reptile, animal, snake, wildlife, lizard, bir...  {'reptiles': -5.453780185493528, 'animals': -7...  
3  [[MASK] such as bags and boxes., [MASK], inclu...  [container, luggage, box, suitcase, backpack, ...  {'container': -5.686797752862327, 'luggage': -...  [thing, item, object, stuff, luggage, good, bo...  {'things': -6.690334050230899, 'items': -7.423...  
4  [[MASK] such as rabbits and foxes., [MASK], in...  [animal, mammal, fox, dog, cat, bird, creature...  {'animal': -6.896906227081929, 'mammal': -7.01...  [animal, mammal, rodent, wildlife, predator, p...  {'animals': -6.168908405188514, 'mammals': -6....  
---------------------------------------- anchor evaluation ----------------------------------------
begin{tabular}{rlrrrrrr}
hline
    	 mask_type        	   p@1 	   p@5 	   p@10 	   mrr 	   anchor_wordnet_avg_path 	   anchor_wordnet_coverage 
hline
  0 	 subj_anchors_sg  	  44.6 	  44.6 	   44.6 	  44.6 	                      6.83 	                     0.889 
  1 	 subj_anchors_all 	  44.6 	  64   	   68.9 	  52.7 	                      6.83 	                     0.889 
hline
end{tabular}
---------------------------------------- obj_label evaluation ----------------------------------------
begin{tabular}{rlrrrrrrr}
hline
    	 mask_type   	   p@1 	   p@5 	   p@10 	   mrr 	   anchor_wordnet_avg_path 	   anchor_wordnet_coverage 	   mask_type_id 
hline
  1 	 def_sap     	  13.3 	  36.7 	   46.8 	  23.2 	                      6.83 	                     0.889 	              1 
  2 	 lsp_sap     	  12.3 	  33.1 	   44.4 	  21.2 	                      6.83 	                     0.889 	              3 
  3 	 def_dap     	  12.1 	  35.7 	   47.2 	  22.4 	                      6.83 	                     0.889 	              2 
  4 	 lsp_dap     	  12.4 	  31.5 	   43.4 	  20.8 	                      6.83 	                     0.889 	              4 
hline
end{tabular}
save log/bert-large-uncased/ALL/swow_rw/df_all_use_global_dap_True_max_anchor_num_1_anchor_scorer_probAvg_filter_obj_True_filter_objects_with_input_True_wnp_False_cpt_False_anchor_source_LM_swow_score_source_None.HYPERNYMSUITE.tsv
save log/bert-large-uncased/ALL/swow_rw/exp_data_results_max_anchor_num_1_anchor_scorer_probAvg_filter_obj_True_filter_objects_with_input_True_wnp_False_cpt_False_anchor_source_LM_swow_score_source_None.HYPERNYMSUITE.csv
debug: False
---------------------------------------- config ----------------------------------------
{'debug': False, 'test_relations': ['IsA'], 'save_all_data': True, 'top_k': 10, 'data_dir': 'data/hypernymsuite/ALL/swow_rw/', 'mask_string_mapping': {'bert-large-uncased': '[MASK]'}, 'use_dap_global': True, 'return_probs': True, 'anchor_scorer_list': ['probAvg'], 'scorer_target_1_prompt': 'probSum', 'scorer_target_N_prompts': 'freqProbLogSum', 'use_original_prompt': True, 'original_prompt_source': 'masked_sentence', 'incorporate_operations': ['concate_or_single'], 'filter_anchors_flag': True, 'filter_objects_flag': True, 'cpt_only': False, 'anchor_types': ['Coordinate_remove_Y_PUNC_FULL'], 'add_cpt_score': False, 'constrain_targets': False, 'add_wordnet_path_score': False, 'anchor_probe': 'plural_probe', 'anchor_col_prefix': 'subj_anchors', 'anchor_col': 'subj_anchors_swow', 'anchor_col_sg': 'subj_anchors_swow_sg', 'anchor_col_pl': 'subj_anchors_swow_pl', 'anchor_col_all': 'anchor_col_all', 'filter_objects_with_input': True, 'sub_col': 'sub_label', 'sub_col_sg': 'sub_label_sg', 'sub_col_pl': 'sub_label_pl', 'top_k_anchors': 1, 'max_anchor_num_list': [10], 'max_anchor_num': 10, 'sub_col_sgpl': 'sub_label_sgpl', 'filter_objects_with_anchors': False, 'oracle_anchor_inserted': False, 'use_oracle_anchor': False, 'anchor_source': 'LM', 'add_swow_score': False, 'swow_score_source': 'ShareSWOWStrength', 'add_swow_filter': True}
---------------------------------------- config ----------------------------------------
reading cohyponyms: pre_post_process/log/word_to_cohyponyms.txt
Some weights of the model checkpoint at bert-large-uncased were not used when initializing BertForMaskedLM: ['cls.seq_relationship.bias', 'cls.seq_relationship.weight']
- This IS expected if you are initializing BertForMaskedLM from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing BertForMaskedLM from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
Some weights of the model checkpoint at bert-large-uncased were not used when initializing BertForMaskedLM: ['cls.seq_relationship.bias', 'cls.seq_relationship.weight']
- This IS expected if you are initializing BertForMaskedLM from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing BertForMaskedLM from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
---------------------------------------- bert-large-uncased-anchor_type: Coordinate_remove_Y_PUNC_FULL-scorer_anchor:probAvg-op:concate_or_single ----------------------------------------
{
    "IsA": {
        "relation": "IsA",
        "def_sap": [
            "[X] is a [MASK].",
            "[X] is a type of [MASK].",
            "[X] is a kind of [MASK]."
        ],
        "def_dap": [
            "[X] or [Z] is a [MASK].",
            "[X] or [Z] is a type of [MASK].",
            "[X] or [Z] is a kind of [MASK]."
        ],
        "lsp_sap": [
            "[MASK] such as [X].",
            "[MASK], including [X].",
            "[MASK], especially [X].",
            "[X] or other [MASK].",
            "[X] and other [MASK].",
            "such [MASK] as [X]."
        ],
        "lsp_dap": [
            "[MASK] such as [X] and [Z].",
            "[MASK], including [X] and [Z].",
            "[MASK], especially [X] and [Z].",
            "[X], [Z] and other [MASK].",
            "[X], [Z] or other [MASK].",
            "such [MASK] as [X] and [Z]."
        ],
        "use_dap": true,
        "anchor_target": "[X]",
        "anchor_lsp_sap": [
            "such as [X] and [MASK].",
            "such as [X] or [MASK].",
            "such as [X], [MASK],",
            "including [X] and [MASK].",
            "including [X] or [MASK].",
            "including [X], [MASK],",
            "especially [X] and [MASK].",
            "especially [X] or [MASK].",
            "especially [X], [MASK],",
            "[X], [MASK] or other",
            "[X], [MASK] and other"
        ]
    }
}
Processing IsA ... data/hypernymsuite/ALL/swow_rw//IsA.jsonl
#All Instances: 2094
#Valid Instances: 2094 in HYPERNYMSUITE (hyper in BERT)
	 step1: get anchors (fill and filter)
/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(
--- def_sap
--- lsp_sap
/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(
relation: IsA 	 use_dap: True
	 step2: insert anchors
sub_col sub_label
                                                def_dap subj_anchors_sg
0     [a catfish or [Z] is a [MASK]., a catfish or [...          [bass]
1     [a lemon or [Z] is a [MASK]., a lemon or [Z] i...        [yellow]
2     [a turtle or [Z] is a [MASK]., a turtle or [Z]...         [snake]
3     [a bag or [Z] is a [MASK]., a bag or [Z] is a ...          [case]
4     [a rabbit or [Z] is a [MASK]., a rabbit or [Z]...           [fox]
...                                                 ...             ...
2089  [a world or [Z] is a [MASK]., a world or [Z] i...        [people]
2090  [a world or [Z] is a [MASK]., a world or [Z] i...        [people]
2091  [a world or [Z] is a [MASK]., a world or [Z] i...        [people]
2092  [a writer or [Z] is a [MASK]., a writer or [Z]...    [journalist]
2093  [a yard or [Z] is a [MASK]., a yard or [Z] is ...          [barn]

[2094 rows x 2 columns]
                                                lsp_dap subj_anchors_pl
0     [[MASK] such as catfish and [Z]., [MASK], incl...        [basses]
1     [[MASK] such as lemon and [Z]., [MASK], includ...        [yellow]
2     [[MASK] such as turtles and [Z]., [MASK], incl...        [snakes]
3     [[MASK] such as bags and [Z]., [MASK], includi...         [cases]
4     [[MASK] such as rabbits and [Z]., [MASK], incl...         [foxes]
...                                                 ...             ...
2089  [[MASK] such as worlds and [Z]., [MASK], inclu...        [people]
2090  [[MASK] such as worlds and [Z]., [MASK], inclu...        [people]
2091  [[MASK] such as worlds and [Z]., [MASK], inclu...        [people]
2092  [[MASK] such as writers and [Z]., [MASK], incl...   [journalists]
2093  [[MASK] such as yard and [Z]., [MASK], includi...          [barn]

[2094 rows x 2 columns]
	 step3: fill mask in dap anchors
  0%|          | 0/2094 [00:00<?, ?it/s]/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(
 60%|██████    | 1262/2094 [01:00<00:39, 21.03it/s] 60%|██████    | 1262/2094 [01:20<00:39, 21.03it/s]100%|██████████| 2094/2094 [01:39<00:00, 21.02it/s]
  0%|          | 0/2094 [00:00<?, ?it/s] 30%|███       | 638/2094 [01:00<02:16, 10.63it/s] 30%|███       | 638/2094 [01:10<02:16, 10.63it/s] 61%|██████    | 1275/2094 [02:00<01:17, 10.62it/s] 61%|██████    | 1275/2094 [02:10<01:17, 10.62it/s] 91%|█████████▏| 1913/2094 [03:00<00:17, 10.62it/s] 91%|█████████▏| 1913/2094 [03:10<00:17, 10.62it/s]100%|██████████| 2094/2094 [03:17<00:00, 10.63it/s]
  sub_label   obj_label relation  obj_in_BERT         masked_sentences  uuid  sub_position sub_label_sg sub_label_pl                                            def_sap                                            def_dap                                            lsp_sap                                            lsp_dap                                     anchor_lsp_sap           sub_label_sgpl                                  obj_mask_sentence                            obj_mask_sentence_score                                   obj_mask_def_sap                             obj_mask_def_sap_score                                   obj_mask_lsp_sap                             obj_mask_lsp_sap_score                                       subj_anchors                                 subj_anchors_score subj_anchors_sg subj_anchors_pl                                   subj_anchors_all    subj_anchors_combined                           def_dap_with_subj_anchor  \
0   catfish      [fish]      IsA            1  [A catfish is a [MASK]]     1             2      catfish      catfish  [a catfish is a [MASK]., a catfish is a type o...  [a catfish or [Z] is a [MASK]., a catfish or [...  [[MASK] such as catfish., [MASK], including ca...  [[MASK] such as catfish and [Z]., [MASK], incl...  [such as catfish and [MASK]., such as catfish ...  catfish catfish catfish  [fish, boat, river, genus, gastropod, lizard, ...  {'fish': -17.492517940945792, 'boat': -19.0523...  [fish, shrimp, mollusk, swimmer, salmon, bird,...  {'fish': -4.442973047064299, 'shrimp': -12.345...  [fish, species, animal, seafood, reptile, inve...  {'fish': -4.942579534624883, 'species': -9.299...  [bass, carp, shrimp, perch, alligator, trout, ...  {'bass': 0.39879070899703284, 'carp': 0.181602...          [bass]        [basses]  [bass, carp, shrimp, perch, alligator, trout, ...  catfish catfish catfish  [a catfish or a bass is a [MASK]., a catfish o...   
1     lemon   [produce]      IsA            1    [A lemon is a [MASK]]     2             2        lemon        lemon  [a lemon is a [MASK]., a lemon is a type of [M...  [a lemon or [Z] is a [MASK]., a lemon or [Z] i...  [[MASK] such as lemon., [MASK], including lemo...  [[MASK] such as lemon and [Z]., [MASK], includ...  [such as lemon and [MASK]., such as lemon or [...        lemon lemon lemon  [fruit, tree, person, bottle, key, seed, twist...  {'fruit': -15.145185477808239, 'tree': -15.459...  [fruit, drink, lime, candy, apple, orange, ber...  {'fruit': -7.934486012665629, 'drink': -10.454...  [fruit, citrus, apple, thing, orange, lime, wa...  {'fruit': -7.175187479938773, 'fruits': -7.897...                                   [yellow, orange]  {'lime': 0.5027932287617163, 'orange': 0.15136...        [yellow]        [yellow]                                   [yellow, orange]        lemon lemon lemon  [a lemon or a yellow is a [MASK]., a lemon or ...   
2   turtles     [beast]      IsA            1   [A turtle is a [MASK]]     3             2       turtle      turtles  [a turtle is a [MASK]., a turtle is a type of ...  [a turtle or [Z] is a [MASK]., a turtle or [Z]...  [[MASK] such as turtles., [MASK], including tu...  [[MASK] such as turtles and [Z]., [MASK], incl...  [such as turtles and [MASK]., such as turtles ...   turtles turtle turtles   [lizard, person, shell, boat, human, fish, tree]  {'lizard': -16.036533980021577, 'person': -16....  [bird, animal, fish, mammal, creature, lizard,...  {'bird': -6.983079495727402, 'animal': -7.2181...  [reptile, animal, bird, creature, wildlife, in...  {'reptiles': -6.12624919356388, 'animals': -6....  [snakes, birds, fish, lizards, frogs, dragons,...  {'snakes': 0.3146660774946213, 'birds': 0.1580...         [snake]        [snakes]  [snake, bird, fish, lizard, frog, dragon, shar...   turtles turtle turtles  [a turtle or a snake is a [MASK]., a turtle or...   
3      bags   [luggage]      IsA            1      [A bag is a [MASK]]     4             2          bag         bags  [a bag is a [MASK]., a bag is a type of [MASK]...  [a bag or [Z] is a [MASK]., a bag or [Z] is a ...  [[MASK] such as bags., [MASK], including bags....  [[MASK] such as bags and [Z]., [MASK], includi...  [such as bags and [MASK]., such as bags or [MA...            bags bag bags  [person, box, pouch, pack, container, suitcase...  {'person': -15.800401335816666, 'box': -16.478...  [container, luggage, backpack, suitcase, sack,...  {'container': -8.861242617076943, 'luggage': -...  [thing, item, object, luggage, belongings, acc...  {'things': -7.206912668513597, 'items': -8.137...                                     [cases, shoes]  {'boxes': 0.1638453546911478, 'yes': 0.0626923...          [case]         [cases]                                       [case, shoe]            bags bag bags  [a bag or a case is a [MASK]., a bag or a case...   
4   rabbits  [creature]      IsA            1   [A rabbit is a [MASK]]     5             2       rabbit      rabbits  [a rabbit is a [MASK]., a rabbit is a type of ...  [a rabbit or [Z] is a [MASK]., a rabbit or [Z]...  [[MASK] such as rabbits., [MASK], including ra...  [[MASK] such as rabbits and [Z]., [MASK], incl...  [such as rabbits and [MASK]., such as rabbits ...   rabbits rabbit rabbits  [person, horse, human, dog, man, child, pig, k...  {'person': -15.755672171378398, 'horse': -15.9...  [animal, mammal, dog, bird, cat, fox, pig, har...  {'animal': -6.5751558948461675, 'mammal': -8.9...  [animal, rodent, mammal, wildlife, livestock, ...  {'animals': -5.903334231711103, 'rodents': -7....  [foxes, deer, squirrels, mice, rodents, rats, ...  {'foxes': 0.21225315535610373, 'deer': 0.16438...           [fox]         [foxes]  [fox, deer, squirrels, mouse, rodent, rat, dog...   rabbits rabbit rabbits  [a rabbit or a fox is a [MASK]., a rabbit or a...   

                            lsp_dap_with_subj_anchor                                   obj_mask_def_dap                             obj_mask_def_dap_score                                   obj_mask_lsp_dap                             obj_mask_lsp_dap_score  
0  [[MASK] such as catfish and basses., [MASK], i...  [fish, species, salmon, predator, bass, seafoo...  {'fish': -4.323410478695007, 'species': -12.50...  [fish, species, seafood, fishing, fishery, ani...  {'fish': -4.768969405566868, 'species': -8.950...  
1  [[MASK] such as lemon and yellow., [MASK], inc...  [fruit, flower, orange, wine, lime, drink, app...  {'fruit': -7.371728576620542, 'flower': -9.337...  [color, colour, orange, yellow, flower, variet...  {'colors': -5.956233236265533, 'colours': -8.1...  
2  [[MASK] such as turtles and snakes., [MASK], i...  [bird, animal, snake, fish, mammal, lizard, cr...  {'bird': -7.140210269612996, 'animal': -7.4942...  [reptile, animal, snake, wildlife, lizard, bir...  {'reptiles': -5.453780185493528, 'animals': -7...  
3  [[MASK] such as bags and cases., [MASK], inclu...  [container, luggage, suitcase, backpack, case,...  {'container': -5.959000094939431, 'luggage': -...  [item, thing, luggage, object, container, good...  {'items': -7.736039384966243, 'things': -7.905...  
4  [[MASK] such as rabbits and foxes., [MASK], in...  [animal, mammal, fox, dog, cat, bird, creature...  {'animal': -6.896906227081929, 'mammal': -7.01...  [animal, mammal, rodent, wildlife, predator, p...  {'animals': -6.168908405188514, 'mammals': -6....  
---------------------------------------- anchor evaluation ----------------------------------------
begin{tabular}{rlrrrrrr}
hline
    	 mask_type        	   p@1 	   p@5 	   p@10 	   mrr 	   anchor_wordnet_avg_path 	   anchor_wordnet_coverage 
hline
  0 	 subj_anchors_sg  	  40.9 	  40.9 	   40.9 	  40.9 	                      6.87 	                     0.903 
  1 	 subj_anchors_all 	  40.9 	  53.1 	   55.2 	  46.2 	                      6.87 	                     0.903 
hline
end{tabular}
---------------------------------------- obj_label evaluation ----------------------------------------
begin{tabular}{rlrrrrrrr}
hline
    	 mask_type   	   p@1 	   p@5 	   p@10 	   mrr 	   anchor_wordnet_avg_path 	   anchor_wordnet_coverage 	   mask_type_id 
hline
  1 	 def_sap     	  13.3 	  36.7 	   46.8 	  23.2 	                      6.87 	                     0.903 	              1 
  2 	 lsp_sap     	  12.3 	  33.1 	   44.4 	  21.2 	                      6.87 	                     0.903 	              3 
  3 	 def_dap     	  11.8 	  35.9 	   47.7 	  22.4 	                      6.87 	                     0.903 	              2 
  4 	 lsp_dap     	  12   	  31.7 	   42.7 	  20.4 	                      6.87 	                     0.903 	              4 
hline
end{tabular}
save log/bert-large-uncased/ALL/swow_rw/df_all_use_global_dap_True_max_anchor_num_1_anchor_scorer_probAvg_filter_obj_True_filter_objects_with_input_True_wnp_False_cpt_False_anchor_source_LM_swow_score_source_ShareSWOWStrength.HYPERNYMSUITE.tsv
save log/bert-large-uncased/ALL/swow_rw/exp_data_results_max_anchor_num_1_anchor_scorer_probAvg_filter_obj_True_filter_objects_with_input_True_wnp_False_cpt_False_anchor_source_LM_swow_score_source_ShareSWOWStrength.HYPERNYMSUITE.csv
debug: False
---------------------------------------- config ----------------------------------------
{'debug': False, 'test_relations': ['IsA'], 'save_all_data': True, 'top_k': 10, 'data_dir': 'data/hypernymsuite/ALL/swow_rw/', 'mask_string_mapping': {'bert-large-uncased': '[MASK]'}, 'use_dap_global': True, 'return_probs': True, 'anchor_scorer_list': ['probAvg'], 'scorer_target_1_prompt': 'probSum', 'scorer_target_N_prompts': 'freqProbLogSum', 'use_original_prompt': True, 'original_prompt_source': 'masked_sentence', 'incorporate_operations': ['concate_or_single'], 'filter_anchors_flag': True, 'filter_objects_flag': True, 'cpt_only': False, 'anchor_types': ['Coordinate_remove_Y_PUNC_FULL'], 'add_cpt_score': False, 'constrain_targets': False, 'add_wordnet_path_score': False, 'anchor_probe': 'plural_probe', 'anchor_col_prefix': 'subj_anchors', 'anchor_col': 'subj_anchors_swow', 'anchor_col_sg': 'subj_anchors_swow_sg', 'anchor_col_pl': 'subj_anchors_swow_pl', 'anchor_col_all': 'anchor_col_all', 'filter_objects_with_input': True, 'sub_col': 'sub_label', 'sub_col_sg': 'sub_label_sg', 'sub_col_pl': 'sub_label_pl', 'top_k_anchors': 1, 'max_anchor_num_list': [10], 'max_anchor_num': 10, 'sub_col_sgpl': 'sub_label_sgpl', 'filter_objects_with_anchors': False, 'oracle_anchor_inserted': False, 'use_oracle_anchor': False, 'anchor_source': 'LM', 'add_swow_score': False, 'swow_score_source': 'ShareSWOWSimilar', 'add_swow_filter': True}
---------------------------------------- config ----------------------------------------
reading cohyponyms: pre_post_process/log/word_to_cohyponyms.txt
Some weights of the model checkpoint at bert-large-uncased were not used when initializing BertForMaskedLM: ['cls.seq_relationship.weight', 'cls.seq_relationship.bias']
- This IS expected if you are initializing BertForMaskedLM from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing BertForMaskedLM from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
Some weights of the model checkpoint at bert-large-uncased were not used when initializing BertForMaskedLM: ['cls.seq_relationship.weight', 'cls.seq_relationship.bias']
- This IS expected if you are initializing BertForMaskedLM from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing BertForMaskedLM from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
---------------------------------------- bert-large-uncased-anchor_type: Coordinate_remove_Y_PUNC_FULL-scorer_anchor:probAvg-op:concate_or_single ----------------------------------------
{
    "IsA": {
        "relation": "IsA",
        "def_sap": [
            "[X] is a [MASK].",
            "[X] is a type of [MASK].",
            "[X] is a kind of [MASK]."
        ],
        "def_dap": [
            "[X] or [Z] is a [MASK].",
            "[X] or [Z] is a type of [MASK].",
            "[X] or [Z] is a kind of [MASK]."
        ],
        "lsp_sap": [
            "[MASK] such as [X].",
            "[MASK], including [X].",
            "[MASK], especially [X].",
            "[X] or other [MASK].",
            "[X] and other [MASK].",
            "such [MASK] as [X]."
        ],
        "lsp_dap": [
            "[MASK] such as [X] and [Z].",
            "[MASK], including [X] and [Z].",
            "[MASK], especially [X] and [Z].",
            "[X], [Z] and other [MASK].",
            "[X], [Z] or other [MASK].",
            "such [MASK] as [X] and [Z]."
        ],
        "use_dap": true,
        "anchor_target": "[X]",
        "anchor_lsp_sap": [
            "such as [X] and [MASK].",
            "such as [X] or [MASK].",
            "such as [X], [MASK],",
            "including [X] and [MASK].",
            "including [X] or [MASK].",
            "including [X], [MASK],",
            "especially [X] and [MASK].",
            "especially [X] or [MASK].",
            "especially [X], [MASK],",
            "[X], [MASK] or other",
            "[X], [MASK] and other"
        ]
    }
}
Processing IsA ... data/hypernymsuite/ALL/swow_rw//IsA.jsonl
#All Instances: 2094
#Valid Instances: 2094 in HYPERNYMSUITE (hyper in BERT)
	 step1: get anchors (fill and filter)
/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(
--- def_sap
--- lsp_sap
/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(
relation: IsA 	 use_dap: True
	 step2: insert anchors
sub_col sub_label
                                                def_dap subj_anchors_sg
0     [a catfish or [Z] is a [MASK]., a catfish or [...         [trout]
1     [a lemon or [Z] is a [MASK]., a lemon or [Z] i...          [lime]
2     [a turtle or [Z] is a [MASK]., a turtle or [Z]...         [snake]
3     [a bag or [Z] is a [MASK]., a bag or [Z] is a ...           [box]
4     [a rabbit or [Z] is a [MASK]., a rabbit or [Z]...        [rodent]
...                                                 ...             ...
2089  [a world or [Z] is a [MASK]., a world or [Z] i...         [human]
2090  [a world or [Z] is a [MASK]., a world or [Z] i...         [human]
2091  [a world or [Z] is a [MASK]., a world or [Z] i...         [human]
2092  [a writer or [Z] is a [MASK]., a writer or [Z]...        [editor]
2093  [a yard or [Z] is a [MASK]., a yard or [Z] is ...         [house]

[2094 rows x 2 columns]
                                                lsp_dap subj_anchors_pl
0     [[MASK] such as catfish and [Z]., [MASK], incl...         [trout]
1     [[MASK] such as lemon and [Z]., [MASK], includ...         [limes]
2     [[MASK] such as turtles and [Z]., [MASK], incl...        [snakes]
3     [[MASK] such as bags and [Z]., [MASK], includi...         [boxes]
4     [[MASK] such as rabbits and [Z]., [MASK], incl...       [rodents]
...                                                 ...             ...
2089  [[MASK] such as worlds and [Z]., [MASK], inclu...         [human]
2090  [[MASK] such as worlds and [Z]., [MASK], inclu...         [human]
2091  [[MASK] such as worlds and [Z]., [MASK], inclu...         [human]
2092  [[MASK] such as writers and [Z]., [MASK], incl...       [editors]
2093  [[MASK] such as yard and [Z]., [MASK], includi...        [houses]

[2094 rows x 2 columns]
	 step3: fill mask in dap anchors
  0%|          | 0/2094 [00:00<?, ?it/s]/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(
 61%|██████    | 1269/2094 [01:00<00:39, 21.14it/s] 61%|██████    | 1269/2094 [01:20<00:39, 21.14it/s]100%|██████████| 2094/2094 [01:38<00:00, 21.16it/s]
  0%|          | 0/2094 [00:00<?, ?it/s] 31%|███       | 643/2094 [01:00<02:15, 10.70it/s] 31%|███       | 643/2094 [01:11<02:15, 10.70it/s] 61%|██████▏   | 1285/2094 [02:00<01:15, 10.69it/s] 61%|██████▏   | 1285/2094 [02:11<01:15, 10.69it/s] 92%|█████████▏| 1928/2094 [03:00<00:15, 10.70it/s] 92%|█████████▏| 1928/2094 [03:11<00:15, 10.70it/s]100%|██████████| 2094/2094 [03:15<00:00, 10.70it/s]
  sub_label   obj_label relation  obj_in_BERT         masked_sentences  uuid  sub_position sub_label_sg sub_label_pl                                            def_sap                                            def_dap                                            lsp_sap                                            lsp_dap                                     anchor_lsp_sap           sub_label_sgpl                                  obj_mask_sentence                            obj_mask_sentence_score                                   obj_mask_def_sap                             obj_mask_def_sap_score                                   obj_mask_lsp_sap                             obj_mask_lsp_sap_score                                       subj_anchors                                 subj_anchors_score subj_anchors_sg subj_anchors_pl                                   subj_anchors_all    subj_anchors_combined                           def_dap_with_subj_anchor  \
0   catfish      [fish]      IsA            1  [A catfish is a [MASK]]     1             2      catfish      catfish  [a catfish is a [MASK]., a catfish is a type o...  [a catfish or [Z] is a [MASK]., a catfish or [...  [[MASK] such as catfish., [MASK], including ca...  [[MASK] such as catfish and [Z]., [MASK], incl...  [such as catfish and [MASK]., such as catfish ...  catfish catfish catfish  [fish, boat, river, genus, gastropod, lizard, ...  {'fish': -17.492517940945792, 'boat': -19.0523...  [fish, shrimp, mollusk, swimmer, salmon, bird,...  {'fish': -4.442973047064299, 'shrimp': -12.345...  [fish, species, animal, seafood, reptile, inve...  {'fish': -4.942579534624883, 'species': -9.299...                                            [trout]  {'bass': 0.39879070899703284, 'carp': 0.181602...         [trout]         [trout]                                            [trout]  catfish catfish catfish  [a catfish or a trout is a [MASK]., a catfish ...   
1     lemon   [produce]      IsA            1    [A lemon is a [MASK]]     2             2        lemon        lemon  [a lemon is a [MASK]., a lemon is a type of [M...  [a lemon or [Z] is a [MASK]., a lemon or [Z] i...  [[MASK] such as lemon., [MASK], including lemo...  [[MASK] such as lemon and [Z]., [MASK], includ...  [such as lemon and [MASK]., such as lemon or [...        lemon lemon lemon  [fruit, tree, person, bottle, key, seed, twist...  {'fruit': -15.145185477808239, 'tree': -15.459...  [fruit, drink, lime, candy, apple, orange, ber...  {'fruit': -7.934486012665629, 'drink': -10.454...  [fruit, citrus, apple, thing, orange, lime, wa...  {'fruit': -7.175187479938773, 'fruits': -7.897...  [lime, orange, apple, yes, cherry, water, pepp...  {'lime': 0.5027932287617163, 'orange': 0.15136...          [lime]         [limes]  [lime, orange, apple, yes, cherry, water, pepp...        lemon lemon lemon  [a lemon or a lime is a [MASK]., a lemon or a ...   
2   turtles     [beast]      IsA            1   [A turtle is a [MASK]]     3             2       turtle      turtles  [a turtle is a [MASK]., a turtle is a type of ...  [a turtle or [Z] is a [MASK]., a turtle or [Z]...  [[MASK] such as turtles., [MASK], including tu...  [[MASK] such as turtles and [Z]., [MASK], incl...  [such as turtles and [MASK]., such as turtles ...   turtles turtle turtles   [lizard, person, shell, boat, human, fish, tree]  {'lizard': -16.036533980021577, 'person': -16....  [bird, animal, fish, mammal, creature, lizard,...  {'bird': -6.983079495727402, 'animal': -7.2181...  [reptile, animal, bird, creature, wildlife, in...  {'reptiles': -6.12624919356388, 'animals': -6....  [snakes, birds, fish, lizards, frogs, dragons,...  {'snakes': 0.3146660774946213, 'birds': 0.1580...         [snake]        [snakes]  [snake, bird, fish, lizard, frog, dragon, shar...   turtles turtle turtles  [a turtle or a snake is a [MASK]., a turtle or...   
3      bags   [luggage]      IsA            1      [A bag is a [MASK]]     4             2          bag         bags  [a bag is a [MASK]., a bag is a type of [MASK]...  [a bag or [Z] is a [MASK]., a bag or [Z] is a ...  [[MASK] such as bags., [MASK], including bags....  [[MASK] such as bags and [Z]., [MASK], includi...  [such as bags and [MASK]., such as bags or [MA...            bags bag bags  [person, box, pouch, pack, container, suitcase...  {'person': -15.800401335816666, 'box': -16.478...  [container, luggage, backpack, suitcase, sack,...  {'container': -8.861242617076943, 'luggage': -...  [thing, item, object, luggage, belongings, acc...  {'things': -7.206912668513597, 'items': -8.137...  [boxes, yes, shoes, cases, obviously, yeah, cl...  {'boxes': 0.1638453546911478, 'yes': 0.0626923...           [box]         [boxes]  [box, yes, shoe, case, obviously, yeah, clothe...            bags bag bags  [a bag or a box is a [MASK]., a bag or a box i...   
4   rabbits  [creature]      IsA            1   [A rabbit is a [MASK]]     5             2       rabbit      rabbits  [a rabbit is a [MASK]., a rabbit is a type of ...  [a rabbit or [Z] is a [MASK]., a rabbit or [Z]...  [[MASK] such as rabbits., [MASK], including ra...  [[MASK] such as rabbits and [Z]., [MASK], incl...  [such as rabbits and [MASK]., such as rabbits ...   rabbits rabbit rabbits  [person, horse, human, dog, man, child, pig, k...  {'person': -15.755672171378398, 'horse': -15.9...  [animal, mammal, dog, bird, cat, fox, pig, har...  {'animal': -6.5751558948461675, 'mammal': -8.9...  [animal, rodent, mammal, wildlife, livestock, ...  {'animals': -5.903334231711103, 'rodents': -7....                                          [rodents]  {'foxes': 0.21225315535610373, 'deer': 0.16438...        [rodent]       [rodents]                                           [rodent]   rabbits rabbit rabbits  [a rabbit or a rodent is a [MASK]., a rabbit o...   

                            lsp_dap_with_subj_anchor                                   obj_mask_def_dap                             obj_mask_def_dap_score                                   obj_mask_lsp_dap                             obj_mask_lsp_dap_score  
0  [[MASK] such as catfish and trout., [MASK], in...  [fish, species, salmon, trout, freshwater, pre...  {'fish': -4.253217245046752, 'species': -12.24...  [fish, species, fishing, fishery, animal, seaf...  {'fish': -5.0773572713633035, 'species': -7.86...  
1  [[MASK] such as lemon and limes., [MASK], incl...  [lime, fruit, drink, soda, wine, juice, candy,...  {'lime': -6.902179866134984, 'fruit': -7.08791...  [fruit, citrus, thing, lime, ingredient, drink...  {'fruits': -7.096098222037281, 'fruit': -7.179...  
2  [[MASK] such as turtles and snakes., [MASK], i...  [bird, animal, snake, fish, mammal, lizard, cr...  {'bird': -7.140210269612996, 'animal': -7.4942...  [reptile, animal, snake, wildlife, lizard, bir...  {'reptiles': -5.453780185493528, 'animals': -7...  
3  [[MASK] such as bags and boxes., [MASK], inclu...  [container, luggage, box, suitcase, backpack, ...  {'container': -5.686797752862327, 'luggage': -...  [thing, item, object, stuff, luggage, good, bo...  {'things': -6.690334050230899, 'items': -7.423...  
4  [[MASK] such as rabbits and rodents., [MASK], ...  [mammal, animal, species, creature, predator, ...  {'mammal': -5.311165544519599, 'animal': -6.29...  [animal, rodent, mammal, wildlife, livestock, ...  {'animals': -5.68861383113838, 'rodents': -6.7...  
---------------------------------------- anchor evaluation ----------------------------------------
begin{tabular}{rlrrrrrr}
hline
    	 mask_type        	   p@1 	   p@5 	   p@10 	   mrr 	   anchor_wordnet_avg_path 	   anchor_wordnet_coverage 
hline
  0 	 subj_anchors_sg  	  44.6 	  44.6 	   44.6 	  44.6 	                      6.72 	                     0.887 
  1 	 subj_anchors_all 	  44.6 	  55.6 	   58.6 	  49.5 	                      6.72 	                     0.887 
hline
end{tabular}
---------------------------------------- obj_label evaluation ----------------------------------------
begin{tabular}{rlrrrrrrr}
hline
    	 mask_type   	   p@1 	   p@5 	   p@10 	   mrr 	   anchor_wordnet_avg_path 	   anchor_wordnet_coverage 	   mask_type_id 
hline
  1 	 def_sap     	  13.3 	  36.7 	   46.8 	  23.2 	                      6.72 	                     0.887 	              1 
  2 	 lsp_sap     	  12.3 	  33.1 	   44.4 	  21.2 	                      6.72 	                     0.887 	              3 
  3 	 def_dap     	  12.4 	  37.6 	   48.2 	  23   	                      6.72 	                     0.887 	              2 
  4 	 lsp_dap     	  12.5 	  32.3 	   44.1 	  21.2 	                      6.72 	                     0.887 	              4 
hline
end{tabular}
save log/bert-large-uncased/ALL/swow_rw/df_all_use_global_dap_True_max_anchor_num_1_anchor_scorer_probAvg_filter_obj_True_filter_objects_with_input_True_wnp_False_cpt_False_anchor_source_LM_swow_score_source_ShareSWOWSimilar.HYPERNYMSUITE.tsv
save log/bert-large-uncased/ALL/swow_rw/exp_data_results_max_anchor_num_1_anchor_scorer_probAvg_filter_obj_True_filter_objects_with_input_True_wnp_False_cpt_False_anchor_source_LM_swow_score_source_ShareSWOWSimilar.HYPERNYMSUITE.csv
debug: False
---------------------------------------- config ----------------------------------------
{'debug': False, 'test_relations': ['IsA'], 'save_all_data': True, 'top_k': 10, 'data_dir': 'data/hypernymsuite/ALL/swow_rw/', 'mask_string_mapping': {'bert-large-uncased': '[MASK]'}, 'use_dap_global': True, 'return_probs': True, 'anchor_scorer_list': ['probAvg'], 'scorer_target_1_prompt': 'probSum', 'scorer_target_N_prompts': 'freqProbLogSum', 'use_original_prompt': True, 'original_prompt_source': 'masked_sentence', 'incorporate_operations': ['concate_or_single'], 'filter_anchors_flag': True, 'filter_objects_flag': True, 'cpt_only': False, 'anchor_types': ['Coordinate_remove_Y_PUNC_FULL'], 'add_cpt_score': False, 'constrain_targets': False, 'add_wordnet_path_score': False, 'anchor_probe': 'plural_probe', 'anchor_col_prefix': 'subj_anchors', 'anchor_col': 'subj_anchors_swow', 'anchor_col_sg': 'subj_anchors_swow_sg', 'anchor_col_pl': 'subj_anchors_swow_pl', 'anchor_col_all': 'anchor_col_all', 'filter_objects_with_input': True, 'sub_col': 'sub_label', 'sub_col_sg': 'sub_label_sg', 'sub_col_pl': 'sub_label_pl', 'top_k_anchors': 1, 'max_anchor_num_list': [10], 'max_anchor_num': 10, 'sub_col_sgpl': 'sub_label_sgpl', 'filter_objects_with_anchors': False, 'oracle_anchor_inserted': False, 'use_oracle_anchor': False, 'anchor_source': 'LM', 'add_swow_score': True, 'swow_score_source': 'AddSWOWStrength', 'add_swow_filter': False}
---------------------------------------- config ----------------------------------------
reading cohyponyms: pre_post_process/log/word_to_cohyponyms.txt
Some weights of the model checkpoint at bert-large-uncased were not used when initializing BertForMaskedLM: ['cls.seq_relationship.bias', 'cls.seq_relationship.weight']
- This IS expected if you are initializing BertForMaskedLM from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing BertForMaskedLM from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
Some weights of the model checkpoint at bert-large-uncased were not used when initializing BertForMaskedLM: ['cls.seq_relationship.bias', 'cls.seq_relationship.weight']
- This IS expected if you are initializing BertForMaskedLM from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing BertForMaskedLM from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
---------------------------------------- bert-large-uncased-anchor_type: Coordinate_remove_Y_PUNC_FULL-scorer_anchor:probAvg-op:concate_or_single ----------------------------------------
{
    "IsA": {
        "relation": "IsA",
        "def_sap": [
            "[X] is a [MASK].",
            "[X] is a type of [MASK].",
            "[X] is a kind of [MASK]."
        ],
        "def_dap": [
            "[X] or [Z] is a [MASK].",
            "[X] or [Z] is a type of [MASK].",
            "[X] or [Z] is a kind of [MASK]."
        ],
        "lsp_sap": [
            "[MASK] such as [X].",
            "[MASK], including [X].",
            "[MASK], especially [X].",
            "[X] or other [MASK].",
            "[X] and other [MASK].",
            "such [MASK] as [X]."
        ],
        "lsp_dap": [
            "[MASK] such as [X] and [Z].",
            "[MASK], including [X] and [Z].",
            "[MASK], especially [X] and [Z].",
            "[X], [Z] and other [MASK].",
            "[X], [Z] or other [MASK].",
            "such [MASK] as [X] and [Z]."
        ],
        "use_dap": true,
        "anchor_target": "[X]",
        "anchor_lsp_sap": [
            "such as [X] and [MASK].",
            "such as [X] or [MASK].",
            "such as [X], [MASK],",
            "including [X] and [MASK].",
            "including [X] or [MASK].",
            "including [X], [MASK],",
            "especially [X] and [MASK].",
            "especially [X] or [MASK].",
            "especially [X], [MASK],",
            "[X], [MASK] or other",
            "[X], [MASK] and other"
        ]
    }
}
Processing IsA ... data/hypernymsuite/ALL/swow_rw//IsA.jsonl
#All Instances: 2094
#Valid Instances: 2094 in HYPERNYMSUITE (hyper in BERT)
	 step1: get anchors (fill and filter)
/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(
--- def_sap
--- lsp_sap
/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(
relation: IsA 	 use_dap: True
	 step2: insert anchors
sub_col sub_label
                                                def_dap subj_anchors_sg
0     [a catfish or [Z] is a [MASK]., a catfish or [...          [bass]
1     [a lemon or [Z] is a [MASK]., a lemon or [Z] i...          [lime]
2     [a turtle or [Z] is a [MASK]., a turtle or [Z]...         [snake]
3     [a bag or [Z] is a [MASK]., a bag or [Z] is a ...           [box]
4     [a rabbit or [Z] is a [MASK]., a rabbit or [Z]...           [fox]
...                                                 ...             ...
2089  [a world or [Z] is a [MASK]., a world or [Z] i...         [human]
2090  [a world or [Z] is a [MASK]., a world or [Z] i...         [human]
2091  [a world or [Z] is a [MASK]., a world or [Z] i...         [human]
2092  [a writer or [Z] is a [MASK]., a writer or [Z]...        [artist]
2093  [a yard or [Z] is a [MASK]., a yard or [Z] is ...          [barn]

[2094 rows x 2 columns]
                                                lsp_dap subj_anchors_pl
0     [[MASK] such as catfish and [Z]., [MASK], incl...        [basses]
1     [[MASK] such as lemon and [Z]., [MASK], includ...         [limes]
2     [[MASK] such as turtles and [Z]., [MASK], incl...        [snakes]
3     [[MASK] such as bags and [Z]., [MASK], includi...         [boxes]
4     [[MASK] such as rabbits and [Z]., [MASK], incl...         [foxes]
...                                                 ...             ...
2089  [[MASK] such as worlds and [Z]., [MASK], inclu...         [human]
2090  [[MASK] such as worlds and [Z]., [MASK], inclu...         [human]
2091  [[MASK] such as worlds and [Z]., [MASK], inclu...         [human]
2092  [[MASK] such as writers and [Z]., [MASK], incl...       [artists]
2093  [[MASK] such as yard and [Z]., [MASK], includi...          [barn]

[2094 rows x 2 columns]
	 step3: fill mask in dap anchors
  0%|          | 0/2094 [00:00<?, ?it/s]/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(
 61%|██████    | 1273/2094 [01:00<00:38, 21.20it/s] 61%|██████    | 1273/2094 [01:20<00:38, 21.20it/s]100%|██████████| 2094/2094 [01:38<00:00, 21.20it/s]
  0%|          | 0/2094 [00:00<?, ?it/s] 31%|███       | 643/2094 [01:00<02:15, 10.70it/s] 31%|███       | 643/2094 [01:11<02:15, 10.70it/s] 61%|██████▏   | 1286/2094 [02:00<01:15, 10.70it/s] 61%|██████▏   | 1286/2094 [02:11<01:15, 10.70it/s] 92%|█████████▏| 1930/2094 [03:00<00:15, 10.71it/s] 92%|█████████▏| 1930/2094 [03:11<00:15, 10.71it/s]100%|██████████| 2094/2094 [03:15<00:00, 10.71it/s]
  sub_label   obj_label relation  obj_in_BERT         masked_sentences  uuid  sub_position sub_label_sg sub_label_pl                                            def_sap                                            def_dap                                            lsp_sap                                            lsp_dap                                     anchor_lsp_sap           sub_label_sgpl                                  obj_mask_sentence                            obj_mask_sentence_score                                   obj_mask_def_sap                             obj_mask_def_sap_score                                   obj_mask_lsp_sap                             obj_mask_lsp_sap_score                                       subj_anchors                                 subj_anchors_score subj_anchors_sg subj_anchors_pl                                   subj_anchors_all    subj_anchors_combined                           def_dap_with_subj_anchor  \
0   catfish      [fish]      IsA            1  [A catfish is a [MASK]]     1             2      catfish      catfish  [a catfish is a [MASK]., a catfish is a type o...  [a catfish or [Z] is a [MASK]., a catfish or [...  [[MASK] such as catfish., [MASK], including ca...  [[MASK] such as catfish and [Z]., [MASK], incl...  [such as catfish and [MASK]., such as catfish ...  catfish catfish catfish  [fish, boat, river, genus, gastropod, lizard, ...  {'fish': -17.492517940945792, 'boat': -19.0523...  [fish, shrimp, mollusk, swimmer, salmon, bird,...  {'fish': -4.442973047064299, 'shrimp': -12.345...  [fish, species, animal, seafood, reptile, inve...  {'fish': -4.942579534624883, 'species': -9.299...  [bass, carp, shrimp, perch, alligator, trout, ...  {'bass': 0.39879070899703284, 'carp': 0.181602...          [bass]        [basses]  [bass, carp, shrimp, perch, alligator, trout, ...  catfish catfish catfish  [a catfish or a bass is a [MASK]., a catfish o...   
1     lemon   [produce]      IsA            1    [A lemon is a [MASK]]     2             2        lemon        lemon  [a lemon is a [MASK]., a lemon is a type of [M...  [a lemon or [Z] is a [MASK]., a lemon or [Z] i...  [[MASK] such as lemon., [MASK], including lemo...  [[MASK] such as lemon and [Z]., [MASK], includ...  [such as lemon and [MASK]., such as lemon or [...        lemon lemon lemon  [fruit, tree, person, bottle, key, seed, twist...  {'fruit': -15.145185477808239, 'tree': -15.459...  [fruit, drink, lime, candy, apple, orange, ber...  {'fruit': -7.934486012665629, 'drink': -10.454...  [fruit, citrus, apple, thing, orange, lime, wa...  {'fruit': -7.175187479938773, 'fruits': -7.897...  [lime, orange, yellow, apple, yes, cherry, wat...  {'lime': 0.5027932287617163, 'orange': 0.19196...          [lime]         [limes]  [lime, orange, yellow, apple, yes, cherry, wat...        lemon lemon lemon  [a lemon or a lime is a [MASK]., a lemon or a ...   
2   turtles     [beast]      IsA            1   [A turtle is a [MASK]]     3             2       turtle      turtles  [a turtle is a [MASK]., a turtle is a type of ...  [a turtle or [Z] is a [MASK]., a turtle or [Z]...  [[MASK] such as turtles., [MASK], including tu...  [[MASK] such as turtles and [Z]., [MASK], incl...  [such as turtles and [MASK]., such as turtles ...   turtles turtle turtles   [lizard, person, shell, boat, human, fish, tree]  {'lizard': -16.036533980021577, 'person': -16....  [bird, animal, fish, mammal, creature, lizard,...  {'bird': -6.983079495727402, 'animal': -7.2181...  [reptile, animal, bird, creature, wildlife, in...  {'reptiles': -6.12624919356388, 'animals': -6....  [snakes, birds, fish, lizards, frogs, dragons,...  {'snakes': 0.3146660774946213, 'birds': 0.1580...         [snake]        [snakes]  [snake, bird, fish, lizard, frog, dragon, shar...   turtles turtle turtles  [a turtle or a snake is a [MASK]., a turtle or...   
3      bags   [luggage]      IsA            1      [A bag is a [MASK]]     4             2          bag         bags  [a bag is a [MASK]., a bag is a type of [MASK]...  [a bag or [Z] is a [MASK]., a bag or [Z] is a ...  [[MASK] such as bags., [MASK], including bags....  [[MASK] such as bags and [Z]., [MASK], includi...  [such as bags and [MASK]., such as bags or [MA...            bags bag bags  [person, box, pouch, pack, container, suitcase...  {'person': -15.800401335816666, 'box': -16.478...  [container, luggage, backpack, suitcase, sack,...  {'container': -8.861242617076943, 'luggage': -...  [thing, item, object, luggage, belongings, acc...  {'things': -7.206912668513597, 'items': -8.137...  [boxes, papers, yes, shoes, cases, parcels, ob...  {'boxes': 0.1638453546911478, 'papers': 0.0768...           [box]         [boxes]  [box, paper, yes, shoe, case, parcel, obviousl...            bags bag bags  [a bag or a box is a [MASK]., a bag or a box i...   
4   rabbits  [creature]      IsA            1   [A rabbit is a [MASK]]     5             2       rabbit      rabbits  [a rabbit is a [MASK]., a rabbit is a type of ...  [a rabbit or [Z] is a [MASK]., a rabbit or [Z]...  [[MASK] such as rabbits., [MASK], including ra...  [[MASK] such as rabbits and [Z]., [MASK], incl...  [such as rabbits and [MASK]., such as rabbits ...   rabbits rabbit rabbits  [person, horse, human, dog, man, child, pig, k...  {'person': -15.755672171378398, 'horse': -15.9...  [animal, mammal, dog, bird, cat, fox, pig, har...  {'animal': -6.5751558948461675, 'mammal': -8.9...  [animal, rodent, mammal, wildlife, livestock, ...  {'animals': -5.903334231711103, 'rodents': -7....  [foxes, deer, squirrels, mice, rodents, rats, ...  {'foxes': 0.21225315535610373, 'deer': 0.16438...           [fox]         [foxes]  [fox, deer, squirrels, mouse, rodent, rat, dog...   rabbits rabbit rabbits  [a rabbit or a fox is a [MASK]., a rabbit or a...   

                            lsp_dap_with_subj_anchor                                   obj_mask_def_dap                             obj_mask_def_dap_score                                   obj_mask_lsp_dap                             obj_mask_lsp_dap_score  
0  [[MASK] such as catfish and basses., [MASK], i...  [fish, species, salmon, predator, bass, seafoo...  {'fish': -4.323410478695007, 'species': -12.50...  [fish, species, seafood, fishing, fishery, ani...  {'fish': -4.768969405566868, 'species': -8.950...  
1  [[MASK] such as lemon and limes., [MASK], incl...  [lime, fruit, drink, soda, wine, juice, candy,...  {'lime': -6.902179866134984, 'fruit': -7.08791...  [fruit, citrus, thing, lime, ingredient, drink...  {'fruits': -7.096098222037281, 'fruit': -7.179...  
2  [[MASK] such as turtles and snakes., [MASK], i...  [bird, animal, snake, fish, mammal, lizard, cr...  {'bird': -7.140210269612996, 'animal': -7.4942...  [reptile, animal, snake, wildlife, lizard, bir...  {'reptiles': -5.453780185493528, 'animals': -7...  
3  [[MASK] such as bags and boxes., [MASK], inclu...  [container, luggage, box, suitcase, backpack, ...  {'container': -5.686797752862327, 'luggage': -...  [thing, item, object, stuff, luggage, good, bo...  {'things': -6.690334050230899, 'items': -7.423...  
4  [[MASK] such as rabbits and foxes., [MASK], in...  [animal, mammal, fox, dog, cat, bird, creature...  {'animal': -6.896906227081929, 'mammal': -7.01...  [animal, mammal, rodent, wildlife, predator, p...  {'animals': -6.168908405188514, 'mammals': -6....  
---------------------------------------- anchor evaluation ----------------------------------------
begin{tabular}{rlrrrrrr}
hline
    	 mask_type        	   p@1 	   p@5 	   p@10 	   mrr 	   anchor_wordnet_avg_path 	   anchor_wordnet_coverage 
hline
  0 	 subj_anchors_sg  	  45.4 	  45.4 	   45.4 	  45.4 	                      6.81 	                     0.905 
  1 	 subj_anchors_all 	  45.4 	  66.8 	   70.6 	  54.2 	                      6.81 	                     0.905 
hline
end{tabular}
---------------------------------------- obj_label evaluation ----------------------------------------
begin{tabular}{rlrrrrrrr}
hline
    	 mask_type   	   p@1 	   p@5 	   p@10 	   mrr 	   anchor_wordnet_avg_path 	   anchor_wordnet_coverage 	   mask_type_id 
hline
  1 	 def_sap     	  13.3 	  36.7 	   46.8 	  23.2 	                      6.81 	                     0.905 	              1 
  2 	 lsp_sap     	  12.3 	  33.1 	   44.4 	  21.2 	                      6.81 	                     0.905 	              3 
  3 	 def_dap     	  12.6 	  36.8 	   48   	  22.9 	                      6.81 	                     0.905 	              2 
  4 	 lsp_dap     	  12.8 	  32   	   44.4 	  21.3 	                      6.81 	                     0.905 	              4 
hline
end{tabular}
save log/bert-large-uncased/ALL/swow_rw/df_all_use_global_dap_True_max_anchor_num_1_anchor_scorer_probAvg_filter_obj_True_filter_objects_with_input_True_wnp_False_cpt_False_anchor_source_LM_swow_score_source_AddSWOWStrength.HYPERNYMSUITE.tsv
save log/bert-large-uncased/ALL/swow_rw/exp_data_results_max_anchor_num_1_anchor_scorer_probAvg_filter_obj_True_filter_objects_with_input_True_wnp_False_cpt_False_anchor_source_LM_swow_score_source_AddSWOWStrength.HYPERNYMSUITE.csv
debug: False
---------------------------------------- config ----------------------------------------
{'debug': False, 'test_relations': ['IsA'], 'save_all_data': True, 'top_k': 10, 'data_dir': 'data/hypernymsuite/ALL/swow_rw/', 'mask_string_mapping': {'bert-large-uncased': '[MASK]'}, 'use_dap_global': True, 'return_probs': True, 'anchor_scorer_list': ['probAvg'], 'scorer_target_1_prompt': 'probSum', 'scorer_target_N_prompts': 'freqProbLogSum', 'use_original_prompt': True, 'original_prompt_source': 'masked_sentence', 'incorporate_operations': ['concate_or_single'], 'filter_anchors_flag': True, 'filter_objects_flag': True, 'cpt_only': False, 'anchor_types': ['Coordinate_remove_Y_PUNC_FULL'], 'add_cpt_score': False, 'constrain_targets': False, 'add_wordnet_path_score': False, 'anchor_probe': 'plural_probe', 'anchor_col_prefix': 'subj_anchors', 'anchor_col': 'subj_anchors_swow', 'anchor_col_sg': 'subj_anchors_swow_sg', 'anchor_col_pl': 'subj_anchors_swow_pl', 'anchor_col_all': 'anchor_col_all', 'filter_objects_with_input': True, 'sub_col': 'sub_label', 'sub_col_sg': 'sub_label_sg', 'sub_col_pl': 'sub_label_pl', 'top_k_anchors': 1, 'max_anchor_num_list': [10], 'max_anchor_num': 10, 'sub_col_sgpl': 'sub_label_sgpl', 'filter_objects_with_anchors': False, 'oracle_anchor_inserted': False, 'use_oracle_anchor': False, 'anchor_source': 'LM', 'add_swow_score': True, 'swow_score_source': 'AddSWOWSimilar', 'add_swow_filter': False}
---------------------------------------- config ----------------------------------------
reading cohyponyms: pre_post_process/log/word_to_cohyponyms.txt
Some weights of the model checkpoint at bert-large-uncased were not used when initializing BertForMaskedLM: ['cls.seq_relationship.weight', 'cls.seq_relationship.bias']
- This IS expected if you are initializing BertForMaskedLM from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing BertForMaskedLM from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
Some weights of the model checkpoint at bert-large-uncased were not used when initializing BertForMaskedLM: ['cls.seq_relationship.weight', 'cls.seq_relationship.bias']
- This IS expected if you are initializing BertForMaskedLM from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing BertForMaskedLM from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
---------------------------------------- bert-large-uncased-anchor_type: Coordinate_remove_Y_PUNC_FULL-scorer_anchor:probAvg-op:concate_or_single ----------------------------------------
{
    "IsA": {
        "relation": "IsA",
        "def_sap": [
            "[X] is a [MASK].",
            "[X] is a type of [MASK].",
            "[X] is a kind of [MASK]."
        ],
        "def_dap": [
            "[X] or [Z] is a [MASK].",
            "[X] or [Z] is a type of [MASK].",
            "[X] or [Z] is a kind of [MASK]."
        ],
        "lsp_sap": [
            "[MASK] such as [X].",
            "[MASK], including [X].",
            "[MASK], especially [X].",
            "[X] or other [MASK].",
            "[X] and other [MASK].",
            "such [MASK] as [X]."
        ],
        "lsp_dap": [
            "[MASK] such as [X] and [Z].",
            "[MASK], including [X] and [Z].",
            "[MASK], especially [X] and [Z].",
            "[X], [Z] and other [MASK].",
            "[X], [Z] or other [MASK].",
            "such [MASK] as [X] and [Z]."
        ],
        "use_dap": true,
        "anchor_target": "[X]",
        "anchor_lsp_sap": [
            "such as [X] and [MASK].",
            "such as [X] or [MASK].",
            "such as [X], [MASK],",
            "including [X] and [MASK].",
            "including [X] or [MASK].",
            "including [X], [MASK],",
            "especially [X] and [MASK].",
            "especially [X] or [MASK].",
            "especially [X], [MASK],",
            "[X], [MASK] or other",
            "[X], [MASK] and other"
        ]
    }
}
Processing IsA ... data/hypernymsuite/ALL/swow_rw//IsA.jsonl
#All Instances: 2094
#Valid Instances: 2094 in HYPERNYMSUITE (hyper in BERT)
	 step1: get anchors (fill and filter)
/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(
--- def_sap
--- lsp_sap
/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(
relation: IsA 	 use_dap: True
	 step2: insert anchors
sub_col sub_label
                                                def_dap subj_anchors_sg
0     [a catfish or [Z] is a [MASK]., a catfish or [...          [bass]
1     [a lemon or [Z] is a [MASK]., a lemon or [Z] i...          [lime]
2     [a turtle or [Z] is a [MASK]., a turtle or [Z]...         [snake]
3     [a bag or [Z] is a [MASK]., a bag or [Z] is a ...       [luggage]
4     [a rabbit or [Z] is a [MASK]., a rabbit or [Z]...          [hare]
...                                                 ...             ...
2089  [a world or [Z] is a [MASK]., a world or [Z] i...         [human]
2090  [a world or [Z] is a [MASK]., a world or [Z] i...         [human]
2091  [a world or [Z] is a [MASK]., a world or [Z] i...         [human]
2092  [a writer or [Z] is a [MASK]., a writer or [Z]...        [artist]
2093  [a yard or [Z] is a [MASK]., a yard or [Z] is ...          [lawn]

[2094 rows x 2 columns]
                                                lsp_dap subj_anchors_pl
0     [[MASK] such as catfish and [Z]., [MASK], incl...        [basses]
1     [[MASK] such as lemon and [Z]., [MASK], includ...         [limes]
2     [[MASK] such as turtles and [Z]., [MASK], incl...        [snakes]
3     [[MASK] such as bags and [Z]., [MASK], includi...       [luggage]
4     [[MASK] such as rabbits and [Z]., [MASK], incl...          [hare]
...                                                 ...             ...
2089  [[MASK] such as worlds and [Z]., [MASK], inclu...         [human]
2090  [[MASK] such as worlds and [Z]., [MASK], inclu...         [human]
2091  [[MASK] such as worlds and [Z]., [MASK], inclu...         [human]
2092  [[MASK] such as writers and [Z]., [MASK], incl...       [artists]
2093  [[MASK] such as yard and [Z]., [MASK], includi...         [lawns]

[2094 rows x 2 columns]
	 step3: fill mask in dap anchors
  0%|          | 0/2094 [00:00<?, ?it/s]/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(
 61%|██████    | 1270/2094 [01:00<00:38, 21.16it/s] 61%|██████    | 1270/2094 [01:20<00:38, 21.16it/s]100%|██████████| 2094/2094 [01:38<00:00, 21.17it/s]
  0%|          | 0/2094 [00:00<?, ?it/s] 31%|███       | 641/2094 [01:00<02:16, 10.68it/s] 31%|███       | 641/2094 [01:11<02:16, 10.68it/s] 61%|██████    | 1281/2094 [02:00<01:16, 10.66it/s] 61%|██████    | 1281/2094 [02:11<01:16, 10.66it/s] 92%|█████████▏| 1921/2094 [03:00<00:16, 10.67it/s] 92%|█████████▏| 1921/2094 [03:11<00:16, 10.67it/s]100%|██████████| 2094/2094 [03:16<00:00, 10.67it/s]
  sub_label   obj_label relation  obj_in_BERT         masked_sentences  uuid  sub_position sub_label_sg sub_label_pl                                            def_sap                                            def_dap                                            lsp_sap                                            lsp_dap                                     anchor_lsp_sap           sub_label_sgpl                                  obj_mask_sentence                            obj_mask_sentence_score                                   obj_mask_def_sap                             obj_mask_def_sap_score                                   obj_mask_lsp_sap                             obj_mask_lsp_sap_score                                       subj_anchors                                 subj_anchors_score subj_anchors_sg subj_anchors_pl                                   subj_anchors_all    subj_anchors_combined                           def_dap_with_subj_anchor  \
0   catfish      [fish]      IsA            1  [A catfish is a [MASK]]     1             2      catfish      catfish  [a catfish is a [MASK]., a catfish is a type o...  [a catfish or [Z] is a [MASK]., a catfish or [...  [[MASK] such as catfish., [MASK], including ca...  [[MASK] such as catfish and [Z]., [MASK], incl...  [such as catfish and [MASK]., such as catfish ...  catfish catfish catfish  [fish, boat, river, genus, gastropod, lizard, ...  {'fish': -17.492517940945792, 'boat': -19.0523...  [fish, shrimp, mollusk, swimmer, salmon, bird,...  {'fish': -4.442973047064299, 'shrimp': -12.345...  [fish, species, animal, seafood, reptile, inve...  {'fish': -4.942579534624883, 'species': -9.299...  [bass, carp, fish, trout, shrimp, tuna, salmon...  {'bass': 0.5092101466889718, 'carp': 0.4231820...          [bass]        [basses]  [bass, carp, fish, trout, shrimp, tuna, salmon...  catfish catfish catfish  [a catfish or a bass is a [MASK]., a catfish o...   
1     lemon   [produce]      IsA            1    [A lemon is a [MASK]]     2             2        lemon        lemon  [a lemon is a [MASK]., a lemon is a type of [M...  [a lemon or [Z] is a [MASK]., a lemon or [Z] i...  [[MASK] such as lemon., [MASK], including lemo...  [[MASK] such as lemon and [Z]., [MASK], includ...  [such as lemon and [MASK]., such as lemon or [...        lemon lemon lemon  [fruit, tree, person, bottle, key, seed, twist...  {'fruit': -15.145185477808239, 'tree': -15.459...  [fruit, drink, lime, candy, apple, orange, ber...  {'fruit': -7.934486012665629, 'drink': -10.454...  [fruit, citrus, apple, thing, orange, lime, wa...  {'fruit': -7.175187479938773, 'fruits': -7.897...  [lime, citrus, orange, grape, strawberry, appl...  {'lime': 1.1179225818979663, 'citrus': 0.69439...          [lime]         [limes]  [lime, citrus, orange, grape, strawberry, appl...        lemon lemon lemon  [a lemon or a lime is a [MASK]., a lemon or a ...   
2   turtles     [beast]      IsA            1   [A turtle is a [MASK]]     3             2       turtle      turtles  [a turtle is a [MASK]., a turtle is a type of ...  [a turtle or [Z] is a [MASK]., a turtle or [Z]...  [[MASK] such as turtles., [MASK], including tu...  [[MASK] such as turtles and [Z]., [MASK], incl...  [such as turtles and [MASK]., such as turtles ...   turtles turtle turtles   [lizard, person, shell, boat, human, fish, tree]  {'lizard': -16.036533980021577, 'person': -16....  [bird, animal, fish, mammal, creature, lizard,...  {'bird': -6.983079495727402, 'animal': -7.2181...  [reptile, animal, bird, creature, wildlife, in...  {'reptiles': -6.12624919356388, 'animals': -6....  [snakes, birds, fish, lizards, frogs, dragons,...  {'snakes': 0.3146660774946213, 'birds': 0.1580...         [snake]        [snakes]  [snake, bird, fish, lizard, frog, dragon, shar...   turtles turtle turtles  [a turtle or a snake is a [MASK]., a turtle or...   
3      bags   [luggage]      IsA            1      [A bag is a [MASK]]     4             2          bag         bags  [a bag is a [MASK]., a bag is a type of [MASK]...  [a bag or [Z] is a [MASK]., a bag or [Z] is a ...  [[MASK] such as bags., [MASK], including bags....  [[MASK] such as bags and [Z]., [MASK], includi...  [such as bags and [MASK]., such as bags or [MA...            bags bag bags  [person, box, pouch, pack, container, suitcase...  {'person': -15.800401335816666, 'box': -16.478...  [container, luggage, backpack, suitcase, sack,...  {'container': -8.861242617076943, 'luggage': -...  [thing, item, object, luggage, belongings, acc...  {'things': -7.206912668513597, 'items': -8.137...  [luggage, boxes, suitcase, backpack, trunks, s...  {'luggage': 0.5347131554578667, 'boxes': 0.459...       [luggage]       [luggage]  [luggage, box, suitcase, backpack, trunk, stuf...            bags bag bags  [a bag or a luggage is a [MASK]., a bag or a l...   
4   rabbits  [creature]      IsA            1   [A rabbit is a [MASK]]     5             2       rabbit      rabbits  [a rabbit is a [MASK]., a rabbit is a type of ...  [a rabbit or [Z] is a [MASK]., a rabbit or [Z]...  [[MASK] such as rabbits., [MASK], including ra...  [[MASK] such as rabbits and [Z]., [MASK], incl...  [such as rabbits and [MASK]., such as rabbits ...   rabbits rabbit rabbits  [person, horse, human, dog, man, child, pig, k...  {'person': -15.755672171378398, 'horse': -15.9...  [animal, mammal, dog, bird, cat, fox, pig, har...  {'animal': -6.5751558948461675, 'mammal': -8.9...  [animal, rodent, mammal, wildlife, livestock, ...  {'animals': -5.903334231711103, 'rodents': -7....  [hare, rodents, mice, mammals, dogs, deer, rat...  {'hare': 0.4631524533672661, 'rodents': 0.4408...          [hare]          [hare]  [hare, rodent, mouse, mammal, dog, deer, rat, ...   rabbits rabbit rabbits  [a rabbit or a hare is a [MASK]., a rabbit or ...   

                            lsp_dap_with_subj_anchor                                   obj_mask_def_dap                             obj_mask_def_dap_score                                   obj_mask_lsp_dap                             obj_mask_lsp_dap_score  
0  [[MASK] such as catfish and basses., [MASK], i...  [fish, species, salmon, predator, bass, seafoo...  {'fish': -4.323410478695007, 'species': -12.50...  [fish, species, seafood, fishing, fishery, ani...  {'fish': -4.768969405566868, 'species': -8.950...  
1  [[MASK] such as lemon and limes., [MASK], incl...  [lime, fruit, drink, soda, wine, juice, candy,...  {'lime': -6.902179866134984, 'fruit': -7.08791...  [fruit, citrus, thing, lime, ingredient, drink...  {'fruits': -7.096098222037281, 'fruit': -7.179...  
2  [[MASK] such as turtles and snakes., [MASK], i...  [bird, animal, snake, fish, mammal, lizard, cr...  {'bird': -7.140210269612996, 'animal': -7.4942...  [reptile, animal, snake, wildlife, lizard, bir...  {'reptiles': -5.453780185493528, 'animals': -7...  
3  [[MASK] such as bags and luggage., [MASK], inc...  [luggage, container, suitcase, baggage, carrie...  {'luggage': -5.408560133492902, 'container': -...  [luggage, item, thing, good, belongings, objec...  {'luggage': -7.455939632215288, 'items': -8.51...  
4  [[MASK] such as rabbits and hare., [MASK], inc...  [mammal, animal, deer, hare, game, bird, creat...  {'mammal': -6.556110362350051, 'animal': -6.95...  [animal, mammal, game, rodent, livestock, wild...  {'animals': -6.2548625942770215, 'mammals': -7...  
---------------------------------------- anchor evaluation ----------------------------------------
begin{tabular}{rlrrrrrr}
hline
    	 mask_type        	   p@1 	   p@5 	   p@10 	   mrr 	   anchor_wordnet_avg_path 	   anchor_wordnet_coverage 
hline
  0 	 subj_anchors_sg  	    47 	  47   	   47   	  47   	                       6.6 	                      0.93 
  1 	 subj_anchors_all 	    47 	  67.7 	   72.4 	  55.3 	                       6.6 	                      0.93 
hline
end{tabular}
---------------------------------------- obj_label evaluation ----------------------------------------
begin{tabular}{rlrrrrrrr}
hline
    	 mask_type   	   p@1 	   p@5 	   p@10 	   mrr 	   anchor_wordnet_avg_path 	   anchor_wordnet_coverage 	   mask_type_id 
hline
  1 	 def_sap     	  13.3 	  36.7 	   46.8 	  23.2 	                       6.6 	                      0.93 	              1 
  2 	 lsp_sap     	  12.3 	  33.1 	   44.4 	  21.2 	                       6.6 	                      0.93 	              3 
  3 	 def_dap     	  13.3 	  37.4 	   48.8 	  23.7 	                       6.6 	                      0.93 	              2 
  4 	 lsp_dap     	  13.1 	  33.6 	   44.9 	  21.9 	                       6.6 	                      0.93 	              4 
hline
end{tabular}
save log/bert-large-uncased/ALL/swow_rw/df_all_use_global_dap_True_max_anchor_num_1_anchor_scorer_probAvg_filter_obj_True_filter_objects_with_input_True_wnp_False_cpt_False_anchor_source_LM_swow_score_source_AddSWOWSimilar.HYPERNYMSUITE.tsv
save log/bert-large-uncased/ALL/swow_rw/exp_data_results_max_anchor_num_1_anchor_scorer_probAvg_filter_obj_True_filter_objects_with_input_True_wnp_False_cpt_False_anchor_source_LM_swow_score_source_AddSWOWSimilar.HYPERNYMSUITE.csv
