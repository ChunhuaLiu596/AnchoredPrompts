debug: False
---------------------------------------- config ----------------------------------------
{'debug': False, 'test_relations': ['IsA'], 'save_all_data': True, 'top_k': 10, 'data_dir': 'data/hypernymsuite/ALL/SWOWStrength/', 'mask_string_mapping': {'bert-large-uncased': '[MASK]'}, 'use_dap_global': True, 'return_probs': True, 'anchor_scorer_list': ['probAvg'], 'scorer_target_1_prompt': 'probSum', 'scorer_target_N_prompts': 'freqProbLogSum', 'use_original_prompt': True, 'original_prompt_source': 'masked_sentence', 'incorporate_operations': ['concate_or_single'], 'filter_anchors_flag': True, 'filter_objects_flag': True, 'cpt_only': False, 'anchor_types': ['Coordinate_remove_Y_PUNC_FULL'], 'add_cpt_score': False, 'constrain_targets': False, 'add_wordnet_path_score': False, 'anchor_probe': 'plural_probe', 'anchor_col_prefix': 'subj_anchors_swow', 'anchor_col': 'subj_anchors_swow', 'anchor_col_sg': 'subj_anchors_swow_sg', 'anchor_col_pl': 'subj_anchors_swow_pl', 'anchor_col_all': 'anchor_col_all', 'filter_objects_with_input': True, 'sub_col': 'sub_label', 'sub_col_sg': 'sub_label_sg', 'sub_col_pl': 'sub_label_pl', 'top_k_anchors': 5, 'max_anchor_num_list': [10], 'max_anchor_num': 10, 'sub_col_sgpl': 'sub_label_sgpl', 'filter_objects_with_anchors': False, 'oracle_anchor_inserted': False, 'use_oracle_anchor': True, 'anchor_source': 'SWOW', 'add_swow_score': False, 'swow_score_source': 'None', 'add_swow_filter': False}
---------------------------------------- config ----------------------------------------
reading cohyponyms: pre_post_process/log/word_to_cohyponyms.txt
Some weights of the model checkpoint at bert-large-uncased were not used when initializing BertForMaskedLM: ['cls.seq_relationship.bias', 'cls.seq_relationship.weight']
- This IS expected if you are initializing BertForMaskedLM from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing BertForMaskedLM from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
Some weights of the model checkpoint at bert-large-uncased were not used when initializing BertForMaskedLM: ['cls.seq_relationship.bias', 'cls.seq_relationship.weight']
- This IS expected if you are initializing BertForMaskedLM from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing BertForMaskedLM from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
---------------------------------------- bert-large-uncased-anchor_type: Coordinate_remove_Y_PUNC_FULL-scorer_anchor:probAvg-op:concate_or_single ----------------------------------------
{
    "IsA": {
        "relation": "IsA",
        "def_sap": [
            "[X] is a [MASK].",
            "[X] is a type of [MASK].",
            "[X] is a kind of [MASK]."
        ],
        "def_dap": [
            "[X] or [Z] is a [MASK].",
            "[X] or [Z] is a type of [MASK].",
            "[X] or [Z] is a kind of [MASK]."
        ],
        "lsp_sap": [
            "[MASK] such as [X].",
            "[MASK], including [X].",
            "[MASK], especially [X].",
            "[X] or other [MASK].",
            "[X] and other [MASK].",
            "such [MASK] as [X]."
        ],
        "lsp_dap": [
            "[MASK] such as [X] and [Z].",
            "[MASK], including [X] and [Z].",
            "[MASK], especially [X] and [Z].",
            "[X], [Z] and other [MASK].",
            "[X], [Z] or other [MASK].",
            "such [MASK] as [X] and [Z]."
        ],
        "use_dap": true,
        "anchor_target": "[X]",
        "anchor_lsp_sap": [
            "such as [X] and [MASK].",
            "such as [X] or [MASK].",
            "such as [X], [MASK],",
            "including [X] and [MASK].",
            "including [X] or [MASK].",
            "including [X], [MASK],",
            "especially [X] and [MASK].",
            "especially [X] or [MASK].",
            "especially [X], [MASK],",
            "[X], [MASK] or other",
            "[X], [MASK] and other"
        ]
    }
}
Processing IsA ... data/hypernymsuite/ALL/SWOWStrength//IsA.jsonl
#All Instances: 2078
#Valid Instances: 2078 in HYPERNYMSUITE (hyper in BERT)
	 step1: get anchors (fill and filter)
/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(
--- def_sap
--- lsp_sap
relation: IsA 	 use_dap: True
	 step2: insert anchors
sub_col sub_label
                                                def_dap                      subj_anchors_swow_sg
0     [a catfish or [Z] is a [MASK]., a catfish or [...                         [whisker, catsup]
1     [a lemon or [Z] is a [MASK]., a lemon or [Z] i...       [lime, sour, citrus, yellow, rinds]
2     [a turtle or [Z] is a [MASK]., a turtle or [Z]...   [tortoise, shell, slow, ninja, reptile]
3     [a bag or [Z] is a [MASK]., a bag or [Z] is a ...     [tote, satchel, sack, purse, plastic]
4     [a rabbit or [Z] is a [MASK]., a rabbit or [Z]...     [bunny, roger, carrot, white, rodent]
...                                                 ...                                       ...
2073  [a world or [Z] is a [MASK]., a world or [Z] i...      [atlas, universe, peaces, map, wide]
2074  [a world or [Z] is a [MASK]., a world or [Z] i...      [atlas, universe, peaces, map, wide]
2075  [a world or [Z] is a [MASK]., a world or [Z] i...      [atlas, universe, peaces, map, wide]
2076  [a writer or [Z] is a [MASK]., a writer or [Z]...  [author, journalist, scribe, poet, type]
2077  [a yard or [Z] is a [MASK]., a yard or [Z] is ...         [meter, barn, stick, lawns, sale]

[2078 rows x 2 columns]
                                                lsp_dap                          subj_anchors_swow_pl
0     [[MASK] such as catfish and [Z]., [MASK], incl...                           [whiskers, catsups]
1     [[MASK] such as lemon and [Z]., [MASK], includ...        [limes, sour, citruses, yellow, rinds]
2     [[MASK] such as turtles and [Z]., [MASK], incl...     [tortoises, shells, slow, ninja, reptile]
3     [[MASK] such as bags and [Z]., [MASK], includi...       [tote, satchel, sack, purses, plastics]
4     [[MASK] such as rabbits and [Z]., [MASK], incl...        [bunny, roger, carrots, white, rodent]
...                                                 ...                                           ...
2073  [[MASK] such as worlds and [Z]., [MASK], inclu...          [atlas, universe, peaces, map, wide]
2074  [[MASK] such as worlds and [Z]., [MASK], inclu...          [atlas, universe, peaces, map, wide]
2075  [[MASK] such as worlds and [Z]., [MASK], inclu...          [atlas, universe, peaces, map, wide]
2076  [[MASK] such as writers and [Z]., [MASK], incl...  [authors, journalists, scribe, poets, types]
2077  [[MASK] such as yard and [Z]., [MASK], includi...           [meters, barn, stick, lawns, sales]

[2078 rows x 2 columns]
	 step3: fill mask in dap anchors

  0%|          | 0/2078 [00:00<?, ?it/s]/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(

 13%|█▎        | 275/2078 [01:00<06:34,  4.57it/s]
 13%|█▎        | 275/2078 [01:20<06:34,  4.57it/s]
 27%|██▋       | 552/2078 [02:00<05:31,  4.60it/s]
 27%|██▋       | 552/2078 [02:20<05:31,  4.60it/s]
 40%|████      | 834/2078 [03:00<04:28,  4.64it/s]
 40%|████      | 834/2078 [03:20<04:28,  4.64it/s]
 53%|█████▎    | 1108/2078 [04:00<03:30,  4.61it/s]
 53%|█████▎    | 1108/2078 [04:20<03:30,  4.61it/s]
 67%|██████▋   | 1388/2078 [05:00<02:29,  4.63it/s]
 67%|██████▋   | 1388/2078 [05:20<02:29,  4.63it/s]
 80%|███████▉  | 1653/2078 [06:00<01:33,  4.55it/s]
 80%|███████▉  | 1653/2078 [06:20<01:33,  4.55it/s]
 92%|█████████▏| 1915/2078 [07:00<00:36,  4.49it/s]
 92%|█████████▏| 1915/2078 [07:20<00:36,  4.49it/s]
100%|██████████| 2078/2078 [07:38<00:00,  4.53it/s]

  0%|          | 0/2078 [00:00<?, ?it/s]
  7%|▋         | 139/2078 [01:00<13:57,  2.32it/s]
  7%|▋         | 139/2078 [01:11<13:57,  2.32it/s]
 13%|█▎        | 272/2078 [02:00<13:20,  2.26it/s]
 13%|█▎        | 272/2078 [02:11<13:20,  2.26it/s]
 20%|█▉        | 406/2078 [03:00<12:24,  2.24it/s]
 20%|█▉        | 406/2078 [03:11<12:24,  2.24it/s]
 26%|██▋       | 547/2078 [04:00<11:09,  2.29it/s]
 26%|██▋       | 547/2078 [04:11<11:09,  2.29it/s]
 33%|███▎      | 682/2078 [05:00<10:15,  2.27it/s]
 33%|███▎      | 682/2078 [05:11<10:15,  2.27it/s]
 40%|███▉      | 828/2078 [06:00<08:58,  2.32it/s]
 40%|███▉      | 828/2078 [06:11<08:58,  2.32it/s]
 46%|████▋     | 964/2078 [07:00<08:03,  2.30it/s]
 46%|████▋     | 964/2078 [07:11<08:03,  2.30it/s]
 53%|█████▎    | 1101/2078 [08:01<07:06,  2.29it/s]
 53%|█████▎    | 1101/2078 [08:11<07:06,  2.29it/s]
 60%|█████▉    | 1238/2078 [09:01<06:06,  2.29it/s]
 60%|█████▉    | 1238/2078 [09:11<06:06,  2.29it/s]
 66%|██████▋   | 1380/2078 [10:01<05:02,  2.31it/s]
 66%|██████▋   | 1380/2078 [10:11<05:02,  2.31it/s]
 73%|███████▎  | 1516/2078 [11:01<04:04,  2.30it/s]
 73%|███████▎  | 1516/2078 [11:11<04:04,  2.30it/s]
 79%|███████▉  | 1647/2078 [12:01<03:10,  2.26it/s]
 79%|███████▉  | 1647/2078 [12:11<03:10,  2.26it/s]
 86%|████████▌ | 1778/2078 [13:01<02:14,  2.24it/s]
 86%|████████▌ | 1778/2078 [13:11<02:14,  2.24it/s]
 92%|█████████▏| 1910/2078 [14:01<01:15,  2.22it/s]
 92%|█████████▏| 1910/2078 [14:21<01:15,  2.22it/s]
 98%|█████████▊| 2042/2078 [15:02<00:16,  2.21it/s]
100%|██████████| 2078/2078 [15:18<00:00,  2.26it/s]
  sub_label   obj_label relation         masked_sentences                                         sub_sister  uuid  sub_position sub_label_sg sub_label_pl                                            def_sap                                            def_dap                                            lsp_sap                                            lsp_dap                                     anchor_lsp_sap           sub_label_sgpl                                  subj_anchors_swow                                       subj_anchors  obj_in_BERT                                  obj_mask_sentence                            obj_mask_sentence_score                                   obj_mask_def_sap                             obj_mask_def_sap_score                                   obj_mask_lsp_sap                             obj_mask_lsp_sap_score                     subj_anchors_swow_sg                       subj_anchors_swow_pl                              subj_anchors_swow_all  \
0   catfish      [fish]      IsA  [A catfish is a [MASK]]  ['kingfish', 'bream', 'perch', 'butterfish', '...     1             2      catfish      catfish  [a catfish is a [MASK]., a catfish is a type o...  [a catfish or [Z] is a [MASK]., a catfish or [...  [[MASK] such as catfish., [MASK], including ca...  [[MASK] such as catfish and [Z]., [MASK], incl...  [such as catfish and [MASK]., such as catfish ...  catfish catfish catfish                                [whiskers, catsups]  ['bass', 'carp', 'shrimp', 'perch', 'alligator...            1  [fish, boat, river, genus, gastropod, lizard, ...  {'fish': -17.492517940945792, 'boat': -19.0523...  [fish, shrimp, mollusk, swimmer, salmon, bird,...  {'fish': -4.442973047064299, 'shrimp': -12.345...  [fish, species, animal, seafood, reptile, inve...  {'fish': -4.942579534624883, 'species': -9.299...                        [whisker, catsup]                        [whiskers, catsups]                                  [whisker, catsup]   
1     lemon   [produce]      IsA    [A lemon is a [MASK]]  ['orange', 'tangerine', 'mandarin', 'kumquat',...     2             2        lemon        lemon  [a lemon is a [MASK]., a lemon is a type of [M...  [a lemon or [Z] is a [MASK]., a lemon or [Z] i...  [[MASK] such as lemon., [MASK], including lemo...  [[MASK] such as lemon and [Z]., [MASK], includ...  [such as lemon and [MASK]., such as lemon or [...        lemon lemon lemon  [limes, sour, citruses, yellow, rinds, lemonad...  ['lime', 'orange', 'apple', 'yes', 'cherry', '...            1  [fruit, tree, person, bottle, key, seed, twist...  {'fruit': -15.145185477808239, 'tree': -15.459...  [fruit, drink, lime, candy, apple, orange, ber...  {'fruit': -7.934486012665629, 'drink': -10.454...  [fruit, citrus, apple, thing, orange, lime, wa...  {'fruit': -7.175187479938773, 'fruits': -7.897...      [lime, sour, citrus, yellow, rinds]     [limes, sour, citruses, yellow, rinds]  [lime, sour, citrus, yellow, rinds, lemonade, ...   
2   turtles     [beast]      IsA   [A turtle is a [MASK]]  ['turtleneck', 'camise', 'daishiki', 'dashiki'...     3             2       turtle      turtles  [a turtle is a [MASK]., a turtle is a type of ...  [a turtle or [Z] is a [MASK]., a turtle or [Z]...  [[MASK] such as turtles., [MASK], including tu...  [[MASK] such as turtles and [Z]., [MASK], incl...  [such as turtles and [MASK]., such as turtles ...   turtles turtle turtles  [tortoises, shells, slow, ninja, reptile, seas...  ['snakes', 'birds', 'fish', 'lizards', 'frogs'...            1   [lizard, person, shell, boat, human, fish, tree]  {'lizard': -16.036533980021577, 'person': -16....  [bird, animal, fish, mammal, creature, lizard,...  {'bird': -6.983079495727402, 'animal': -7.2181...  [reptile, animal, bird, creature, wildlife, in...  {'reptiles': -6.12624919356388, 'animals': -6....  [tortoise, shell, slow, ninja, reptile]  [tortoises, shells, slow, ninja, reptile]  [tortoise, shell, slow, ninja, reptile, sea, n...   
3      bags   [luggage]      IsA      [A bag is a [MASK]]  ['tank', 'bowl', 'tin', 'case', 'carriage', 'p...     4             2          bag         bags  [a bag is a [MASK]., a bag is a type of [MASK]...  [a bag or [Z] is a [MASK]., a bag or [Z] is a ...  [[MASK] such as bags., [MASK], including bags....  [[MASK] such as bags and [Z]., [MASK], includi...  [such as bags and [MASK]., such as bags or [MA...            bags bag bags  [tote, satchel, sack, purses, plastics, shoppi...  ['boxes', 'yes', 'shoes', 'cases', 'obviously'...            1  [person, box, pouch, pack, container, suitcase...  {'person': -15.800401335816666, 'box': -16.478...  [container, luggage, backpack, suitcase, sack,...  {'container': -8.861242617076943, 'luggage': -...  [thing, item, object, luggage, belongings, acc...  {'things': -7.206912668513597, 'items': -8.137...    [tote, satchel, sack, purse, plastic]    [tote, satchel, sack, purses, plastics]  [tote, satchel, sack, purse, plastic, shopping...   
4   rabbits  [creature]      IsA   [A rabbit is a [MASK]]  ['lambskin', 'lapin', 'astrakhan', 'bearskin',...     5             2       rabbit      rabbits  [a rabbit is a [MASK]., a rabbit is a type of ...  [a rabbit or [Z] is a [MASK]., a rabbit or [Z]...  [[MASK] such as rabbits., [MASK], including ra...  [[MASK] such as rabbits and [Z]., [MASK], incl...  [such as rabbits and [MASK]., such as rabbits ...   rabbits rabbit rabbits  [bunny, roger, carrots, white, rodent, jack, l...  ['foxes', 'deer', 'squirrels', 'mice', 'rodent...            1  [person, horse, human, dog, man, child, pig, k...  {'person': -15.755672171378398, 'horse': -15.9...  [animal, mammal, dog, bird, cat, fox, pig, har...  {'animal': -6.5751558948461675, 'mammal': -8.9...  [animal, rodent, mammal, wildlife, livestock, ...  {'animals': -5.903334231711103, 'rodents': -7....    [bunny, roger, carrot, white, rodent]     [bunny, roger, carrots, white, rodent]  [bunny, roger, carrot, white, rodent, jack, le...   

     subj_anchors_combined                           def_dap_with_subj_anchor                           lsp_dap_with_subj_anchor                                   obj_mask_def_dap                             obj_mask_def_dap_score                                   obj_mask_lsp_dap                             obj_mask_lsp_dap_score  
0  catfish catfish catfish  [a catfish or a whisker is a [MASK]., a catfis...  [[MASK] such as catfish and whiskers., [MASK] ...  [fish, shrimp, salmon, crab, snake, turtle, mo...  {'fish': -4.589838679403649, 'shrimp': -11.940...  [fish, species, thing, animal, seafood, invert...  {'fish': -5.493127121630919, 'species': -9.990...  
1        lemon lemon lemon  [a lemon or a lime is a [MASK]., a lemon or a ...  [[MASK] such as lemon and limes., [MASK] such ...  [fruit, drink, lime, wine, sour, juice, orange...  {'fruit': -6.589499151730125, 'drink': -8.9572...  [fruit, color, citrus, thing, colour, ingredie...  {'fruits': -7.69108267271473, 'fruit': -8.0804...  
2   turtles turtle turtles  [a turtle or a tortoise is a [MASK]., a turtle...  [[MASK] such as turtles and tortoises., [MASK]...  [animal, bird, mammal, fish, mollusk, creature...  {'animal': -7.76788951465789, 'bird': -8.50305...  [animal, reptile, thing, invertebrates, creatu...  {'animals': -7.132432409490788, 'reptiles': -7...  
3            bags bag bags  [a bag or a tote is a [MASK]., a bag or a satc...  [[MASK] such as bags and tote., [MASK] such as...  [container, luggage, backpack, purse, sack, su...  {'container': -7.344536936716224, 'luggage': -...  [thing, item, luggage, belongings, accessory, ...  {'things': -8.362226625760089, 'items': -8.458...  
4   rabbits rabbit rabbits  [a rabbit or a bunny is a [MASK]., a rabbit or...  [[MASK] such as rabbits and bunny., [MASK] suc...  [mammal, animal, vegetable, carrot, bird, dog,...  {'mammal': -7.279826843389762, 'animal': -7.45...  [animal, mammal, vegetable, rodent, story, pet...  {'animals': -6.538367060768905, 'mammals': -7....  
---------------------------------------- anchor evaluation ----------------------------------------
begin{tabular}{rlrrrrrr}
hline
    	 mask_type             	   p@1 	   p@5 	   p@10 	   mrr 	   anchor_wordnet_avg_path 	   anchor_wordnet_coverage 
hline
  0 	 subj_anchors_swow_sg  	  28.7 	  58.7 	   58.7 	  40.3 	                      8.24 	                     0.869 
  1 	 subj_anchors_swow_all 	  28.7 	  58.7 	   64.4 	  41.3 	                      8.24 	                     0.869 
hline
end{tabular}
---------------------------------------- obj_label evaluation ----------------------------------------
begin{tabular}{rlrrrrrrr}
hline
    	 mask_type   	   p@1 	   p@5 	   p@10 	   mrr 	   anchor_wordnet_avg_path 	   anchor_wordnet_coverage 	   mask_type_id 
hline
  1 	 def_sap     	  13.2 	  36.6 	   46.6 	  23   	                      8.24 	                     0.869 	              1 
  2 	 lsp_sap     	  12.2 	  33   	   44.3 	  21.1 	                      8.24 	                     0.869 	              3 
  3 	 def_dap     	  14.1 	  37.7 	   49.5 	  24.1 	                      8.24 	                     0.869 	              2 
  4 	 lsp_dap     	  13.4 	  33.4 	   45.9 	  22.2 	                      8.24 	                     0.869 	              4 
hline
end{tabular}
save log/bert-large-uncased/ALL/SWOWStrength/df_all_use_global_dap_True_max_anchor_num_5_anchor_scorer_probAvg_filter_obj_True_filter_objects_with_input_True_wnp_False_cpt_False_anchor_source_SWOW_swow_score_source_None.HYPERNYMSUITE.tsv
save log/bert-large-uncased/ALL/SWOWStrength/exp_data_results_max_anchor_num_5_anchor_scorer_probAvg_filter_obj_True_filter_objects_with_input_True_wnp_False_cpt_False_anchor_source_SWOW_swow_score_source_None.HYPERNYMSUITE.csv
debug: False
---------------------------------------- config ----------------------------------------
{'debug': False, 'test_relations': ['IsA'], 'save_all_data': True, 'top_k': 10, 'data_dir': 'data/hypernymsuite/ALL/SWOWSimilar/', 'mask_string_mapping': {'bert-large-uncased': '[MASK]'}, 'use_dap_global': True, 'return_probs': True, 'anchor_scorer_list': ['probAvg'], 'scorer_target_1_prompt': 'probSum', 'scorer_target_N_prompts': 'freqProbLogSum', 'use_original_prompt': True, 'original_prompt_source': 'masked_sentence', 'incorporate_operations': ['concate_or_single'], 'filter_anchors_flag': True, 'filter_objects_flag': True, 'cpt_only': False, 'anchor_types': ['Coordinate_remove_Y_PUNC_FULL'], 'add_cpt_score': False, 'constrain_targets': False, 'add_wordnet_path_score': False, 'anchor_probe': 'plural_probe', 'anchor_col_prefix': 'subj_anchors_swow', 'anchor_col': 'subj_anchors_swow', 'anchor_col_sg': 'subj_anchors_swow_sg', 'anchor_col_pl': 'subj_anchors_swow_pl', 'anchor_col_all': 'anchor_col_all', 'filter_objects_with_input': True, 'sub_col': 'sub_label', 'sub_col_sg': 'sub_label_sg', 'sub_col_pl': 'sub_label_pl', 'top_k_anchors': 5, 'max_anchor_num_list': [10], 'max_anchor_num': 10, 'sub_col_sgpl': 'sub_label_sgpl', 'filter_objects_with_anchors': False, 'oracle_anchor_inserted': False, 'use_oracle_anchor': True, 'anchor_source': 'SWOW', 'add_swow_score': False, 'swow_score_source': 'None', 'add_swow_filter': False}
---------------------------------------- config ----------------------------------------
reading cohyponyms: pre_post_process/log/word_to_cohyponyms.txt
Some weights of the model checkpoint at bert-large-uncased were not used when initializing BertForMaskedLM: ['cls.seq_relationship.bias', 'cls.seq_relationship.weight']
- This IS expected if you are initializing BertForMaskedLM from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing BertForMaskedLM from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
Some weights of the model checkpoint at bert-large-uncased were not used when initializing BertForMaskedLM: ['cls.seq_relationship.bias', 'cls.seq_relationship.weight']
- This IS expected if you are initializing BertForMaskedLM from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing BertForMaskedLM from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
---------------------------------------- bert-large-uncased-anchor_type: Coordinate_remove_Y_PUNC_FULL-scorer_anchor:probAvg-op:concate_or_single ----------------------------------------
{
    "IsA": {
        "relation": "IsA",
        "def_sap": [
            "[X] is a [MASK].",
            "[X] is a type of [MASK].",
            "[X] is a kind of [MASK]."
        ],
        "def_dap": [
            "[X] or [Z] is a [MASK].",
            "[X] or [Z] is a type of [MASK].",
            "[X] or [Z] is a kind of [MASK]."
        ],
        "lsp_sap": [
            "[MASK] such as [X].",
            "[MASK], including [X].",
            "[MASK], especially [X].",
            "[X] or other [MASK].",
            "[X] and other [MASK].",
            "such [MASK] as [X]."
        ],
        "lsp_dap": [
            "[MASK] such as [X] and [Z].",
            "[MASK], including [X] and [Z].",
            "[MASK], especially [X] and [Z].",
            "[X], [Z] and other [MASK].",
            "[X], [Z] or other [MASK].",
            "such [MASK] as [X] and [Z]."
        ],
        "use_dap": true,
        "anchor_target": "[X]",
        "anchor_lsp_sap": [
            "such as [X] and [MASK].",
            "such as [X] or [MASK].",
            "such as [X], [MASK],",
            "including [X] and [MASK].",
            "including [X] or [MASK].",
            "including [X], [MASK],",
            "especially [X] and [MASK].",
            "especially [X] or [MASK].",
            "especially [X], [MASK],",
            "[X], [MASK] or other",
            "[X], [MASK] and other"
        ]
    }
}
Processing IsA ... data/hypernymsuite/ALL/SWOWSimilar//IsA.jsonl
#All Instances: 2070
#Valid Instances: 2070 in HYPERNYMSUITE (hyper in BERT)
	 step1: get anchors (fill and filter)
/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(
--- def_sap
--- lsp_sap
relation: IsA 	 use_dap: True
	 step2: insert anchors
sub_col sub_label
                                                def_dap                               subj_anchors_swow_sg
0     [a catfish or [Z] is a [MASK]., a catfish or [...        [flatfish, crayfish, fish, catsup, seafood]
1     [a lemon or [Z] is a [MASK]., a lemon or [Z] i...             [citrus, lemon, orange, lemony, tangy]
2     [a turtle or [Z] is a [MASK]., a turtle or [Z]...     [tortoise, amphibian, reptile, porpoise, hare]
3     [a bag or [Z] is a [MASK]., a bag or [Z] is a ...            [tote, luggage, carrying, bag, baggage]
4     [a rabbit or [Z] is a [MASK]., a rabbit or [Z]...            [rabbit, bunny, hare, breeding, rodent]
...                                                 ...                                                ...
2065  [a world or [Z] is a [MASK]., a world or [Z] i...       [global, geography, earth, atlas, continent]
2066  [a world or [Z] is a [MASK]., a world or [Z] i...       [global, geography, earth, atlas, continent]
2067  [a world or [Z] is a [MASK]., a world or [Z] i...       [global, geography, earth, atlas, continent]
2068  [a writer or [Z] is a [MASK]., a writer or [Z]...  [editor, manuscript, publication, publish, lit...
2069  [a yard or [Z] is a [MASK]., a yard or [Z] is ...                 [backyard, grass, acre, mow, inch]

[2070 rows x 2 columns]
                                                lsp_dap                               subj_anchors_swow_pl
0     [[MASK] such as catfish and [Z]., [MASK], incl...     [flatfish, crayfish, fishes, catsup, seafoods]
1     [[MASK] such as lemon and [Z]., [MASK], includ...           [citrus, lemon, orange, lemonies, tangy]
2     [[MASK] such as turtles and [Z]., [MASK], incl...    [tortoises, amphibian, reptile, porpoise, hare]
3     [[MASK] such as bags and [Z]., [MASK], includi...           [tote, luggage, carrying, bags, baggage]
4     [[MASK] such as rabbits and [Z]., [MASK], incl...           [rabbits, bunny, hare, breeding, rodent]
...                                                 ...                                                ...
2065  [[MASK] such as worlds and [Z]., [MASK], inclu...   [global, geographies, earths, atlas, continents]
2066  [[MASK] such as worlds and [Z]., [MASK], inclu...   [global, geographies, earths, atlas, continents]
2067  [[MASK] such as worlds and [Z]., [MASK], inclu...   [global, geographies, earths, atlas, continents]
2068  [[MASK] such as writers and [Z]., [MASK], incl...  [editors, manuscripts, publications, publish, ...
2069  [[MASK] such as yard and [Z]., [MASK], includi...            [backyard, grasses, acres, mow, inches]

[2070 rows x 2 columns]
	 step3: fill mask in dap anchors

  0%|          | 0/2070 [00:00<?, ?it/s]/home/chunhua/.local/lib/python3.8/site-packages/transformers/pipelines/base.py:1043: UserWarning: You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
  warnings.warn(

 13%|█▎        | 263/2070 [01:00<06:52,  4.38it/s]
 13%|█▎        | 263/2070 [01:20<06:52,  4.38it/s]
 25%|██▌       | 523/2070 [02:00<05:55,  4.35it/s]
 25%|██▌       | 523/2070 [02:20<05:55,  4.35it/s]
 38%|███▊      | 782/2070 [03:00<04:57,  4.33it/s]
 38%|███▊      | 782/2070 [03:20<04:57,  4.33it/s]
 51%|█████     | 1046/2070 [04:00<03:55,  4.35it/s]
 51%|█████     | 1046/2070 [04:20<03:55,  4.35it/s]
 63%|██████▎   | 1309/2070 [05:00<02:54,  4.36it/s]
 63%|██████▎   | 1309/2070 [05:20<02:54,  4.36it/s]
 74%|███████▍  | 1542/2070 [06:00<02:05,  4.20it/s]
 74%|███████▍  | 1542/2070 [06:20<02:05,  4.20it/s]
 87%|████████▋ | 1799/2070 [07:00<01:04,  4.22it/s]
 87%|████████▋ | 1799/2070 [07:20<01:04,  4.22it/s]
100%|█████████▉| 2063/2070 [08:00<00:01,  4.28it/s]
100%|██████████| 2070/2070 [08:02<00:00,  4.29it/s]

  0%|          | 0/2070 [00:00<?, ?it/s]
  6%|▋         | 133/2070 [01:00<14:34,  2.21it/s]
  6%|▋         | 133/2070 [01:17<14:34,  2.21it/s]
 13%|█▎        | 266/2070 [02:00<13:35,  2.21it/s]
 13%|█▎        | 266/2070 [02:17<13:35,  2.21it/s]
 19%|█▉        | 399/2070 [03:00<12:35,  2.21it/s]
 19%|█▉        | 399/2070 [03:17<12:35,  2.21it/s]
 26%|██▌       | 532/2070 [04:00<11:35,  2.21it/s]
 26%|██▌       | 532/2070 [04:17<11:35,  2.21it/s]
 32%|███▏      | 665/2070 [05:00<10:35,  2.21it/s]
 32%|███▏      | 665/2070 [05:18<10:35,  2.21it/s]
 39%|███▊      | 798/2070 [06:00<09:35,  2.21it/s]
 39%|███▊      | 798/2070 [06:18<09:35,  2.21it/s]
 45%|████▍     | 931/2070 [07:01<08:35,  2.21it/s]
 45%|████▍     | 931/2070 [07:18<08:35,  2.21it/s]
 51%|█████▏    | 1064/2070 [08:01<07:35,  2.21it/s]
 51%|█████▏    | 1064/2070 [08:18<07:35,  2.21it/s]
 58%|█████▊    | 1197/2070 [09:01<06:34,  2.21it/s]
 58%|█████▊    | 1197/2070 [09:18<06:34,  2.21it/s]
 64%|██████▍   | 1330/2070 [10:01<05:34,  2.21it/s]
 64%|██████▍   | 1330/2070 [10:18<05:34,  2.21it/s]
 71%|███████   | 1463/2070 [11:01<04:34,  2.21it/s]
 71%|███████   | 1463/2070 [11:18<04:34,  2.21it/s]
 77%|███████▋  | 1596/2070 [12:01<03:34,  2.21it/s]
 77%|███████▋  | 1596/2070 [12:18<03:34,  2.21it/s]
 84%|████████▎ | 1729/2070 [13:01<02:34,  2.21it/s]
 84%|████████▎ | 1729/2070 [13:18<02:34,  2.21it/s]
 90%|█████████ | 1863/2070 [14:02<01:33,  2.22it/s]
 90%|█████████ | 1863/2070 [14:18<01:33,  2.22it/s]
 96%|█████████▋| 1997/2070 [15:02<00:32,  2.22it/s]
 96%|█████████▋| 1997/2070 [15:18<00:32,  2.22it/s]
100%|██████████| 2070/2070 [15:35<00:00,  2.21it/s]
  sub_label   obj_label relation         masked_sentences                                         sub_sister  uuid  sub_position sub_label_sg sub_label_pl                                            def_sap                                            def_dap                                            lsp_sap                                            lsp_dap                                     anchor_lsp_sap           sub_label_sgpl                                  subj_anchors_swow                                       subj_anchors  obj_in_BERT                                  obj_mask_sentence                            obj_mask_sentence_score                                   obj_mask_def_sap                             obj_mask_def_sap_score                                   obj_mask_lsp_sap                             obj_mask_lsp_sap_score                            subj_anchors_swow_sg                             subj_anchors_swow_pl  \
0   catfish      [fish]      IsA  [A catfish is a [MASK]]  ['kingfish', 'bream', 'perch', 'butterfish', '...     1             2      catfish      catfish  [a catfish is a [MASK]., a catfish is a type o...  [a catfish or [Z] is a [MASK]., a catfish or [...  [[MASK] such as catfish., [MASK], including ca...  [[MASK] such as catfish and [Z]., [MASK], incl...  [such as catfish and [MASK]., such as catfish ...  catfish catfish catfish  [flatfish, crayfish, fish, catsup, seafood, tr...  ['bass', 'carp', 'shrimp', 'perch', 'alligator...            1  [fish, boat, river, genus, gastropod, lizard, ...  {'fish': -17.492517940945792, 'boat': -19.0523...  [fish, shrimp, mollusk, swimmer, salmon, bird,...  {'fish': -4.442973047064299, 'shrimp': -12.345...  [fish, species, animal, seafood, reptile, inve...  {'fish': -4.942579534624883, 'species': -9.299...     [flatfish, crayfish, fish, catsup, seafood]   [flatfish, crayfish, fishes, catsup, seafoods]   
1     lemon   [produce]      IsA    [A lemon is a [MASK]]  ['orange', 'tangerine', 'mandarin', 'kumquat',...     2             2        lemon        lemon  [a lemon is a [MASK]., a lemon is a type of [M...  [a lemon or [Z] is a [MASK]., a lemon or [Z] i...  [[MASK] such as lemon., [MASK], including lemo...  [[MASK] such as lemon and [Z]., [MASK], includ...  [such as lemon and [MASK]., such as lemon or [...        lemon lemon lemon  [citrus, lemon, orange, lemony, tangy, lemonad...  ['lime', 'orange', 'apple', 'yes', 'cherry', '...            1  [fruit, tree, person, bottle, key, seed, twist...  {'fruit': -15.145185477808239, 'tree': -15.459...  [fruit, drink, lime, candy, apple, orange, ber...  {'fruit': -7.934486012665629, 'drink': -10.454...  [fruit, citrus, apple, thing, orange, lime, wa...  {'fruit': -7.175187479938773, 'fruits': -7.897...          [citrus, lemon, orange, lemony, tangy]         [citrus, lemon, orange, lemonies, tangy]   
2   turtles     [beast]      IsA   [A turtle is a [MASK]]  ['turtleneck', 'camise', 'daishiki', 'dashiki'...     3             2       turtle      turtles  [a turtle is a [MASK]., a turtle is a type of ...  [a turtle or [Z] is a [MASK]., a turtle or [Z]...  [[MASK] such as turtles., [MASK], including tu...  [[MASK] such as turtles and [Z]., [MASK], incl...  [such as turtles and [MASK]., such as turtles ...   turtles turtle turtles  [tortoise, amphibian, reptile, porpoise, hare,...  ['snakes', 'birds', 'fish', 'lizards', 'frogs'...            1   [lizard, person, shell, boat, human, fish, tree]  {'lizard': -16.036533980021577, 'person': -16....  [bird, animal, fish, mammal, creature, lizard,...  {'bird': -6.983079495727402, 'animal': -7.2181...  [reptile, animal, bird, creature, wildlife, in...  {'reptiles': -6.12624919356388, 'animals': -6....  [tortoise, amphibian, reptile, porpoise, hare]  [tortoises, amphibian, reptile, porpoise, hare]   
3      bags   [luggage]      IsA      [A bag is a [MASK]]  ['tank', 'bowl', 'tin', 'case', 'carriage', 'p...     4             2          bag         bags  [a bag is a [MASK]., a bag is a type of [MASK]...  [a bag or [Z] is a [MASK]., a bag or [Z] is a ...  [[MASK] such as bags., [MASK], including bags....  [[MASK] such as bags and [Z]., [MASK], includi...  [such as bags and [MASK]., such as bags or [MA...            bags bag bags  [tote, luggage, carrying, bag, baggage, cargo,...  ['boxes', 'yes', 'shoes', 'cases', 'obviously'...            1  [person, box, pouch, pack, container, suitcase...  {'person': -15.800401335816666, 'box': -16.478...  [container, luggage, backpack, suitcase, sack,...  {'container': -8.861242617076943, 'luggage': -...  [thing, item, object, luggage, belongings, acc...  {'things': -7.206912668513597, 'items': -8.137...         [tote, luggage, carrying, bag, baggage]         [tote, luggage, carrying, bags, baggage]   
4   rabbits  [creature]      IsA   [A rabbit is a [MASK]]  ['lambskin', 'lapin', 'astrakhan', 'bearskin',...     5             2       rabbit      rabbits  [a rabbit is a [MASK]., a rabbit is a type of ...  [a rabbit or [Z] is a [MASK]., a rabbit or [Z]...  [[MASK] such as rabbits., [MASK], including ra...  [[MASK] such as rabbits and [Z]., [MASK], incl...  [such as rabbits and [MASK]., such as rabbits ...   rabbits rabbit rabbits  [rabbit, bunny, hare, breeding, rodent, breed,...  ['foxes', 'deer', 'squirrels', 'mice', 'rodent...            1  [person, horse, human, dog, man, child, pig, k...  {'person': -15.755672171378398, 'horse': -15.9...  [animal, mammal, dog, bird, cat, fox, pig, har...  {'animal': -6.5751558948461675, 'mammal': -8.9...  [animal, rodent, mammal, wildlife, livestock, ...  {'animals': -5.903334231711103, 'rodents': -7....         [rabbit, bunny, hare, breeding, rodent]         [rabbits, bunny, hare, breeding, rodent]   

                               subj_anchors_swow_all    subj_anchors_combined                           def_dap_with_subj_anchor                           lsp_dap_with_subj_anchor                                   obj_mask_def_dap                             obj_mask_def_dap_score                                   obj_mask_lsp_dap                             obj_mask_lsp_dap_score  
0  [flatfish, crayfish, fish, catsup, seafood, tr...  catfish catfish catfish  [a catfish or a flatfish is a [MASK]., a catfi...  [[MASK] such as catfish and flatfish., [MASK] ...  [fish, seafood, shrimp, species, salmon, mollu...  {'fish': -4.441462001524424, 'seafood': -12.19...  [fish, seafood, species, animal, invertebrates...  {'fish': -5.422924101665833, 'seafood': -9.238...  
1  [citrus, lemon, orange, lemony, tangy, lemonad...        lemon lemon lemon  [a lemon or a citrus is a [MASK]., a lemon or ...  [[MASK] such as lemon and citrus., [MASK] such...  [fruit, drink, candy, cheese, juice, apple, wi...  {'fruit': -6.023195289694768, 'drink': -9.1104...  [fruit, citrus, thing, flavor, product, drink,...  {'fruits': -6.894004314912516, 'fruit': -7.198...  
2  [tortoise, amphibian, reptile, porpoise, hare,...   turtles turtle turtles  [a turtle or a tortoise is a [MASK]., a turtle...  [[MASK] such as turtles and tortoises., [MASK]...  [animal, mammal, bird, fish, creature, lizard,...  {'animal': -7.09361726059407, 'mammal': -7.972...  [reptile, animal, wildlife, bird, species, inv...  {'reptiles': -6.340240455093307, 'animals': -6...  
3  [tote, luggage, carrying, bag, baggage, cargo,...            bags bag bags  [a bag or a tote is a [MASK]., a bag or a lugg...  [[MASK] such as bags and tote., [MASK] such as...  [luggage, container, backpack, suitcase, carri...  {'luggage': -7.0207782373472964, 'container': ...  [luggage, thing, item, good, object, belonging...  {'luggage': -8.043161411863721, 'things': -8.2...  
4  [rabbit, bunny, hare, breeding, rodent, breed,...   rabbits rabbit rabbits  [a rabbit or a rabbit is a [MASK]., a rabbit o...  [[MASK] such as rabbits and rabbits., [MASK] s...  [mammal, animal, creature, bird, dog, hare, br...  {'mammal': -6.48185866174879, 'animal': -6.842...  [animal, mammal, rodent, wildlife, livestock, ...  {'animals': -6.005946150273001, 'mammals': -7....  
---------------------------------------- anchor evaluation ----------------------------------------
begin{tabular}{rlrrrrrr}
hline
    	 mask_type             	   p@1 	   p@5 	   p@10 	   mrr 	   anchor_wordnet_avg_path 	   anchor_wordnet_coverage 
hline
  0 	 subj_anchors_swow_sg  	  36.6 	  62.6 	   62.6 	  46.8 	                      7.89 	                     0.852 
  1 	 subj_anchors_swow_all 	  36.6 	  62.6 	   68.9 	  47.6 	                      7.89 	                     0.852 
hline
end{tabular}
---------------------------------------- obj_label evaluation ----------------------------------------
begin{tabular}{rlrrrrrrr}
hline
    	 mask_type   	   p@1 	   p@5 	   p@10 	   mrr 	   anchor_wordnet_avg_path 	   anchor_wordnet_coverage 	   mask_type_id 
hline
  1 	 def_sap     	  13.2 	  36.6 	   46.8 	  23   	                      7.89 	                     0.852 	              1 
  2 	 lsp_sap     	  12.2 	  32.9 	   44.2 	  21.1 	                      7.89 	                     0.852 	              3 
  3 	 def_dap     	  14   	  39.1 	   49.6 	  24.4 	                      7.89 	                     0.852 	              2 
  4 	 lsp_dap     	  13.7 	  34.2 	   46.1 	  22.5 	                      7.89 	                     0.852 	              4 
hline
end{tabular}
save log/bert-large-uncased/ALL/SWOWSimilar/df_all_use_global_dap_True_max_anchor_num_5_anchor_scorer_probAvg_filter_obj_True_filter_objects_with_input_True_wnp_False_cpt_False_anchor_source_SWOW_swow_score_source_None.HYPERNYMSUITE.tsv
save log/bert-large-uncased/ALL/SWOWSimilar/exp_data_results_max_anchor_num_5_anchor_scorer_probAvg_filter_obj_True_filter_objects_with_input_True_wnp_False_cpt_False_anchor_source_SWOW_swow_score_source_None.HYPERNYMSUITE.csv